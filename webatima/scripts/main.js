!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){(function(t){var r=n(9),i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a=i.Raven,o=new r;o.noConflict=function(){return i.Raven=a,o},o.afterLoad(),e.exports=o,e.exports.Client=r}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var r=n(3),i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(e){return void 0===e}function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function u(e,t){var n,r;if(a(e.length))for(n in e)m(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function d(e,t){if("number"!=typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"…"}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){for(var t,n=[],r=0,i=e.length;r<i;r++)s(t=e[r])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function p(e){var t,n,r,i,a,o=[];if(!e||!e.tagName)return"";if(o.push(e.tagName.toLowerCase()),e.id&&o.push("#"+e.id),(t=e.className)&&s(t))for(n=t.split(/\s+/),a=0;a<n.length;a++)o.push("."+n[a]);var l=["type","name","title","alt"];for(a=0;a<l.length;a++)r=l[a],(i=e.getAttribute(r))&&o.push("["+r+'="'+i+'"]');return o.join("")}function f(e,t){return!!(!!e^!!t)}function v(e,t){if(f(e,t))return!1;var n,r,i=e.frames,a=t.frames;if(void 0===i||void 0===a)return!1;if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++)if(n=i[o],r=a[o],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}var y=3,g=51200,_=40;function b(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function w(e){if("string"==typeof e){return d(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}e.exports={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:a,isFunction:function(e){return"function"==typeof e},isPlainObject:o,isString:s,isArray:l,isEmptyObject:function(e){if(!o(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:c,supportsReferrerPolicy:function(){if(!c())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(e){return function(t,n){var r=e(t)||t;return n&&n(r)||r}},each:u,objectMerge:function(e,t){return t?(u(t,function(t,n){e[t]=n}),e):e},truncate:d,objectFrozen:function(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:m,joinRegExp:h,urlencode:function(e){var t=[];return u(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")},uuid4:function(){var e=i.crypto||i.msCrypto;if(!a(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},htmlTreeAsString:function(e){for(var t,n=[],r=0,i=0,a=" > ".length;e&&r++<5&&!("html"===(t=p(e))||r>1&&i+n.length*a+t.length>=80);)n.push(t),i+=t.length,e=e.parentNode;return n.reverse().join(" > ")},htmlElementAsString:p,isSameException:function(e,t){return!f(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(n=e.stacktrace,r=t.stacktrace,(!a(n)||!a(r))&&v(e.stacktrace,t.stacktrace)));var n,r},isSameStacktrace:v,parseUrl:function(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}},fill:function(e,t,n,r){if(null!=e){var i=e[t];e[t]=n(i),e[t].__raven__=!0,e[t].__orig__=i,r&&r.push([e,t,i])}},safeJoin:function(e,t){if(!l(e))return"";for(var n=[],r=0;r<e.length;r++)try{n.push(String(e[r]))}catch(e){n.push("[value cannot be serialized]")}return n.join(t)},serializeException:function e(t,n,i){if(!o(t))return t;i="number"!=typeof(n="number"!=typeof n?y:n)?g:i;var a=function e(t,n){return 0===n?w(t):o(t)?Object.keys(t).reduce(function(r,i){return r[i]=e(t[i],n-1),r},{}):Array.isArray(t)?t.map(function(t){return e(t,n-1)}):w(t)}(t,n);return b(r(a))>i?e(t,n-1):a},serializeKeysForMessage:function(e,t){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter(function(e){return"string"==typeof e})).length)return"[object has no keys]";if(t="number"!=typeof t?_:t,e[0].length>=t)return e[0];for(var n=e.length;n>0;n--){var r=e.slice(0,n).join(", ");if(!(r.length>t))return n===e.length?r:r+"…"}return""},sanitize:function(e,t){if(!l(t)||l(t)&&0===t.length)return e;var n,i=h(t),a="********";try{n=JSON.parse(r(e))}catch(t){return e}return function e(t){return l(t)?t.map(function(t){return e(t)}):o(t)?Object.keys(t).reduce(function(n,r){return i.test(r)?n[r]=a:n[r]=e(t[r]),n},{}):t}(n)}}}).call(this,n(1))},function(e,t){function n(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function r(e,t){var r=[],i=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,n(r,t)).join(".")+"]"}),function(a,o){if(r.length>0){var s=n(r,this);~s?r.splice(s+1):r.push(this),~s?i.splice(s,1/0,a):i.push(a),~n(r,o)&&(o=t.call(this,a,o))}else r.push(o);return null==e?o instanceof Error?function(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(o):o:e.call(this,a,o)}}(e.exports=function(e,t,n,i){return JSON.stringify(e,r(t,i),n)}).getSerialize=r},function(e,t,n){"use strict";n.r(t);var r={z_effective:1,dedx_straggling:0},i={z_effective:7,dedx_straggling:0},a=[{name:"atima v1.3",config:r},{name:"atima v1.4",config:i}];function o(e){this.z_effective=r.z_effective,this.dedx_straggling=r.dedx_straggling,e&&(e.z_effective&&(this.z_effective=e.z_effective),e.dedx_straggling&&(this.dedx_straggling=e.dedx_straggling))}o.prototype.is_same=function(e){return this.z_effective==e.z_effective&&this.dedx_straggling==e.dedx_straggling},o.prototype.set=function(e){this.z_effective=e.z_effective,this.dedx_straggling=e.dedx_straggling};var s,l,c,u={map:s={201:{key:"Plastics",density:1.032,Ipot:64.7,name:"plastics - BC400",c:{H:.085292,C:.914708}},202:{key:"Air",density:.001205,Ipot:85.7,c:{N:.755267,O:.231781,Ar:.012827,C:124e-6}},203:{key:"CH2",density:.94,c:{C:.856281,H:.143719}},204:{key:"lH2",density:.0708,c:{H:1}},205:{key:"lD2",density:.162,c:{"2H":1}},206:{key:"H2O",density:1,Ipot:78,name:"Water",c:{H:.111898,O:.888102}},207:{key:"Diamond",density:3.52,c:{C:1}},208:{key:"Glass",density:2.4,c:{Si:.37722,O:.539562,B:.040064,Na:.028191,Al:.011644,K:.003321}},209:{key:"ALMG3",density:2.67,c:{Al:.97,Mg:.03}},210:{key:"ArCO2_30",density:.00171,c:{Ar:.679,O:.2321,C:.0889}},211:{key:"CF4",density:.00372,c:{C:.136479,F:.863521}},212:{key:"C4H10",density:.00251,Ipot:48.3,name:"Isobutane",c:{C:.826583,H:.173417}},213:{key:"Kapton",density:1.42,Ipot:79.6,c:{H:.026362,C:.691133,N:.07327,O:.209235}},214:{key:"Mylar",density:1.38,Ipot:78.7,c:{C:.62501,H:.041961,O:.333029}},215:{key:"NaF",density:2.56,name:"Sodium fluoride",c:{Na:.54753,F:.45247}},216:{key:"P10",density:.00166,c:{Ar:.64171,C:.268247,H:.09004}},217:{key:"Polyolefin",density:.9,c:{O:.888102,H:.111898}},218:{key:"CmO2",density:12,c:{Cm:.885337,O:.114663}},219:{key:"Suprasil",density:2.2,c:{Si:.37722,O:.539562,B:.040064,Na:.028191,Al:.011644,K:.003321}},220:{key:"HAVAR",density:8.3,c:{Co:.403228,Cr:.169412,Ni:.124301,W:.089847,Mo:.031259,Fe:.181952}},221:{key:"Steel",density:8,c:{Fe:.74621,Cr:.169,Ni:.08479}},222:{key:"CO2",density:.001842,Ipot:85,name:"Carbon dioxide",c:{C:.272912,O:.727088}},223:{key:"CH4",density:6e-4,Ipot:41.7,name:"Methane",c:{H:.251318,C:.748682}},224:{key:"CH3OH",density:.792,Ipot:67.6,name:"Methanol",c:{H:.125828,C:.374844,O:.499328}},225:{key:"C3H6O",density:.7899,Ipot:64.2,name:"Acetone",c:{H:.104128,C:.620397,O:.275476}},226:{key:"C2H2",density:.0010967,Ipot:58.2,name:"Acetylene",c:{H:.077423,C:.922577}},227:{key:"C5H5N5",density:1.35,Ipot:71.4,name:"Adenine",c:{H:.037296,C:.444424,N:.51828}},228:{key:"Adipose_Tissue",density:.92,Ipot:63.2,name:"Adipose_Tissue ICRP",c:{H:.119477,C:.63724,N:.00797,O:.232333,Na:5e-4,Mg:2e-5,P:16e-5,S:73e-5,Cl:.00119,K:32e-5,Ca:2e-5,Fe:2e-5,Zn:2e-5}},229:{key:"C3H7NO2",density:1.42,Ipot:71.9,name:"Alanine",c:{H:.079193,C:.404432,N:.157214,O:.359161}},230:{key:"Bakelite",density:1.25,Ipot:72.4,c:{H:.057441,C:.774591,O:.167968}},231:{key:"AgBr",density:6.473,Ipot:486.6,name:"Silver Bromide",c:{Ag:.574463,Br:.425537}},232:{key:"AgCl",density:5.56,Ipot:398.4,name:"Silver Chloride",c:{Ag:.752633,Cl:.247367}},233:{key:"AgI",density:5.675,Ipot:543.5,name:"Silver Iodide",c:{Ag:.459458,I:.540542}},234:{key:"Al2O3",density:3.97,Ipot:145.2,name:"Aluminium Oxide",c:{O:.470749,Al:.529251}},235:{key:"Amber",density:1.1,Ipot:63.2,c:{H:.10593,C:.788974,O:.105096}},236:{key:"NH3",density:826e-6,Ipot:53.7,name:"Ammonia",c:{H:.177553,N:.822447}},237:{key:"C6H7N",density:1.0235,Ipot:66.2,name:"Aniline",c:{H:.075763,C:.773831,N:.150405}},238:{key:"C14H10",density:1.283,Ipot:69.5,name:"Anthracene",c:{H:.056553,C:.943447}},239:{key:"A_150",density:1.127,Ipot:65.1,name:"A-150 plastic",c:{H:.101327,C:.7755,N:.035057,O:.0523159,F:.017422,Ca:.018378}},240:{key:"B_100",density:1.45,Ipot:85.9,name:"B-100 plastic",c:{H:.0654709,C:.536944,N:.0215,O:.032085,F:.167411,Ca:.176589}},241:{key:"BaF2",density:4.89,Ipot:375.9,name:"Barium Fluoride",c:{F:.216724,Ba:.783276}},242:{key:"BaSO4",density:4.5,Ipot:285.7,name:"Barium Sulfate",c:{O:.274209,S:.137388,Ba:.588402}},243:{key:"Benzene",density:.87865,Ipot:63.4,c:{H:.077423,C:.922577}},244:{key:"BeO",density:3.01,Ipot:93.2,name:"Beryllium Oxide",c:{Be:.36032,O:.63968}},245:{key:"BGO",density:7.13,Ipot:534.1,name:"Bismuth Germanium Oxide",c:{O:.154108,Ge:.174919,Bi:.670973}},246:{key:"Blood_ICRP",density:1.06,Ipot:75.2,name:"Blood ICRP",c:{H:.101866,C:.10002,N:.02964,O:.759414,Na:.00185,Mg:4e-5,Si:3e-5,P:35e-5,S:.00185,Cl:.00278,K:.00163,Ca:6e-5,Fe:46e-5,Zn:1e-5}},247:{key:"Bone_Compact",density:1.85,Ipot:91.9,name:"Bone Compact ICRP",c:{H:.063984,C:.278,N:.027,O:.410016,Mg:.002,P:.07,S:.002,Ca:.147}},248:{key:"Bone_Cortical",density:1.85,Ipot:106.4,name:"Bone Cortical ICRP",c:{H:.047234,C:.14433,N:.04199,O:.446096,Mg:.0022,P:.10497,S:.00315,Ca:.20993,Zn:1e-4}},249:{key:"Brain_ICRP",density:1.03,Ipot:73.3,c:{H:.110667,C:.12542,N:.01328,O:.737723,Na:.00184,Mg:15e-5,P:.00354,S:.00177,Cl:.00236,K:.0031,Ca:9e-5,Fe:5e-5,Zn:1e-5}},250:{key:"B4C",density:2.52,Ipot:84.7,name:"Boron Carbide",c:{B:.78263,C:.21737}},251:{key:"BC_400",density:1.032,Ipot:64.7,name:"BC-400",c:{H:.085292,C:.914708}},252:{key:"C4H10O",density:.81,Ipot:59.9,name:"nButanol",c:{H:.135985,C:.648162,O:.215853}},253:{key:"C_552",density:1.76,Ipot:86.8,name:"C-552 plastic",c:{H:.02468,C:.50161,O:.004527,F:.465209,Si:.003973}},254:{key:"CdTe",density:6.2,Ipot:539.3,name:"Cadmium Telluride",c:{Cd:.468358,Te:.531642}},255:{key:"CdWO4",density:7.9,Ipot:468.3,name:"Cadmium Tungstate",c:{O:.177648,Cd:.312037,W:.510314}},256:{key:"CaCO3",density:2.8,Ipot:136.4,name:"Calcium Carbonate",c:{C:.120003,O:.479565,Ca:.400432}},257:{key:"CaF2",density:3.18,Ipot:166,name:"Calcium Fluoride",c:{F:.486672,Ca:.513328}},258:{key:"CaO",density:3.34,Ipot:176.1,name:"Calcium Oxide",c:{O:.285309,Ca:.714691}},259:{key:"CaWO4",density:6.062,name:"Calcium Tungstate",c:{O:.222279,Ca:.139201,W:.63852}},260:{key:"CsF",density:4.115,name:"Caesium Fluoride",c:{F:.125069,Cs:.874931}},261:{key:"CsI",density:4.51,name:"Caesium Iodide",c:{I:.488451,Cs:.511549}},262:{key:"CCl4",density:1.594,name:"Carbon Tetrachloride",c:{C:.078081,Cl:.921919}},263:{key:"C2Cl4",density:1.622,name:"Tetrachloroethylene",c:{C:.144853,Cl:.855147}},264:{key:"Cellophane",density:1.42,c:{H:.062162,C:.444462,O:.493376}},265:{key:"C6H5Cl",density:1.1058,name:"Chlorobenzene",c:{H:.044775,C:.640247,Cl:.314978}},266:{key:"CHCl3",density:1.4832,name:"Chloroform",c:{H:.008443,C:.100611,Cl:.890946}},267:{key:"C6H12",density:.779,name:"Cyclohexane",c:{H:.143719,C:.856281}},268:{key:"Concrete",density:2.3,c:{H:.01,C:.001,O:.529107,Na:.016,Mg:.002,Al:.033872,Si:.337021,K:.013,Ca:.044,Fe:.014}},269:{key:"Diethyl_Ether",density:.71378,name:"Diethyl Ether",c:{H:.135985,C:.648162,O:.215853}},270:{key:"C2H6",density:.00125324,name:"Ethane",c:{H:.201125,C:.798875}},271:{key:"C2H6O",density:.7893,name:"Ethanol",c:{H:.131275,C:.521429,O:.347296}},272:{key:"C2H4",density:.00117497,name:"Ethylene",c:{H:.143719,C:.856281}},273:{key:"Eye_lens",density:1.1,name:"Eye Lens ICRP",c:{H:.099269,C:.19371,N:.05327,O:.653751}},274:{key:"Fe2O3",density:5.242,c:{O:.300574,Fe:.699426}},275:{key:"FeO",density:5.745,c:{O:.222695,Fe:.777305}},276:{key:"Freon_12",density:1.486,name:"Freon-12",c:{C:.099333,F:.314248,Cl:.586419}},277:{key:"Freon_12B2",density:2.27,name:"Freon-12B2",c:{C:.057244,F:.181096,Br:.76166}},278:{key:"Freon_13",density:1.526,name:"Freon-13",c:{C:.11498,F:.545623,Cl:.339397}},279:{key:"Freon_13B1",density:1.538,name:"Freon-13B1",c:{C:.080657,F:.38275,Br:.536593}},280:{key:"Freon_13I1",density:1.538,name:"Freon-13I1",c:{C:.061307,F:.290925,I:.647768}},281:{key:"Gd2O2S",density:7.44,name:"Gadolinium Oxysulfide",c:{O:.084527,S:.084702,Gd:.830771}},282:{key:"GaAs",density:5.3176,name:"Gallium Arsenide",c:{Ga:.48203,As:.51797}},283:{key:"Gel_Photo_Emulsion",density:1.2914,name:"Gel in photographic emulsion",c:{H:.08118,C:.41606,N:.11124,O:.38064,S:.01088}},284:{key:"Glass_Pyrex",density:2.23,name:"Borosilicate glass",c:{B:.0400639,O:.539561,Na:.0281909,Al:.011644,Si:.377219,K:.00332099}},285:{key:"Glass_Lead",density:6.22,name:"Glass Lead",c:{O:.156453,Si:.080866,Ti:.008092,As:.002651,Pb:.751938}},286:{key:"C6H12O6",density:1.54,name:"Glucose",c:{H:.067138,C:.40001,O:.532852}},287:{key:"C5H10N2O3",density:1.46,name:"Glutamine",c:{H:.068969,C:.410919,N:.191683,O:.32843}},288:{key:"C3H8O3",density:1.2613,name:"Glycerol",c:{H:.087558,C:.391254,O:.521188}},289:{key:"C5H5N5O",density:1.58,name:"Guanine",c:{H:.033348,C:.397373,N:.463411,O:.105868}},290:{key:"Gypsum",density:2.32,c:{H:.023416,O:.557572,S:.186215,Ca:.232797}},291:{key:"C7H16",density:.68376,name:"nHeptane",c:{H:.160945,C:.839055}},292:{key:"C6H14",density:.66603,name:"nHexane",c:{H:.163749,C:.836251}},293:{key:"KI",density:3.13,name:"Potassium Iodide",c:{K:.235528,I:.764472}},294:{key:"K2O",density:2.32,name:"Potassium Oxide",c:{O:.169852,K:.830148}},295:{key:"LaBr3",density:5.06,name:"Lanthanum Bromide",c:{La:.366876,Br:.633124}},296:{key:"LaOBr",density:6.28,name:"Lanthanum Oxybromide",c:{O:.068138,Br:.340294,La:.591568}},297:{key:"La2O2S",density:5.86,name:"Lanthanum Oxysulfide",c:{O:.093598,S:.093792,La:.81261}},298:{key:"Lung",density:1.05,name:"Lung ICRP",c:{H:.101278,C:.10231,N:.02865,O:.757072,Na:.00184,Mg:73e-5,P:8e-4,S:.00225,Cl:.00266,K:.00194,Ca:9e-5,Fe:37e-5,Zn:1e-5}},299:{key:"MgCO3",density:2.958,name:"Magnesium Carbonate",c:{Mg:.288268,C:.142452,O:.56928}},300:{key:"MgF2",density:3.148,name:"Magnesium Fluoride",c:{Mg:.390117,F:.609883}},301:{key:"MgO",density:3.6,name:"Magnesium Oxide",c:{Mg:.603036,O:.396964}},302:{key:"MS20_Tissue",density:1,name:"MS20 Tissue",c:{H:.081192,C:.583442,N:.017798,O:.186381,Mg:.130287,Cl:9e-4}},303:{key:"Muscle_skeletal",density:1.04,name:"Muscle Skeletal ICRP",c:{H:.100637,C:.10783,N:.02768,O:.754773,Na:75e-5,Mg:19e-5,P:.0018,S:.00241,Cl:79e-5,K:.00302,Ca:3e-5,Fe:4e-5,Zn:5e-5}},304:{key:"Muscle_strained",density:1.04,name:"Muscle Strained ICRP",c:{H:.101997,C:.123,N:.035,O:.729003,Na:8e-4,Mg:2e-4,P:.002,S:.005,K:.003}},305:{key:"Muscle_sucrose",density:1.11,name:"Muscle with scrose",c:{H:.0982341,C:.156214,N:.035451,O:.710101}},306:{key:"Muscle_no_sucrose",density:1.07,name:"Muscle without scrose",c:{H:.101969,C:.120058,N:.035451,O:.742522}},307:{key:"Na2CO3",density:2.532,name:"Sodium carbonate",c:{C:.14471,O:.578301,Na:.27699}},308:{key:"NaI",density:3.667,name:"Sodium Iodide",c:{Na:.153373,I:.846627}},309:{key:"NaCl",density:2.165,name:"Sodium Chloride",c:{Na:.393372,Cl:.606628}},310:{key:"Na2O",density:2.27,name:"Sodium Oxide",c:{O:.258143,Na:.741857}},311:{key:"NaNO3",density:2.261,name:"Sodium Nitrate",c:{N:.164795,O:.56472,Na:.270485}},312:{key:"C10H8",density:1.145,name:"Naphthalene",c:{H:.062912,C:.937088}},313:{key:"C6H5NO2",density:1.199,name:"Nitrobenzene",c:{H:.040937,C:.585367,N:.113774,O:.259922}},314:{key:"N2O",density:.00183,name:"Nitrous Oxide",c:{N:.636483,O:.363517}},315:{key:"C8H18",density:.703,name:"Octane",c:{H:.15883,C:.84117}},316:{key:"Paraffin",density:.93,c:{H:.148605,C:.851395}},317:{key:"C5H12",density:.626,name:"nPentane",c:{H:.167644,C:.832356}},318:{key:"PhotoEmulsion",density:3.815,name:"Photo Emulsion",c:{H:.0141,C:.072261,N:.01932,O:.066101,S:.00189,Br:.349103,Ag:.474105}},319:{key:"PuO2",density:11.46,name:"Plutonium Dioxide",c:{O:.115911,Pu:.884089}},320:{key:"Polyacrylonitrile",density:1.184,c:{H:.056986,C:.679049,N:.263965}},321:{key:"Polycarbonate",density:1.2,c:{H:.055491,C:.755751,O:.188758}},322:{key:"PMMA",density:1.18,name:"PMMA - Plexiglass",c:{H:.080542,C:.59984,O:.319618}},323:{key:"POM",density:1.42,name:"POM-Polyoxymethylene",c:{H:.067138,C:.40001,O:.532852}},324:{key:"C3H6",density:.9,name:"Polypropylene",c:{C:.856281,H:.143719}},325:{key:"C8H8",density:1.06,name:"Polystyrene",c:{C:.922577,H:.077423}},326:{key:"C3H8",density:.00188,name:"Propane",c:{H:.182864,C:.817136}},327:{key:"nPropanol",density:.8035,name:"nPropanol",c:{H:.13418,C:.599585,O:.266235}},328:{key:"PVC",density:1.3,c:{H:.048382,C:.384353,Cl:.567264}},329:{key:"Pyridine",density:.9819,c:{H:.063713,C:.759211,N:.177076}},330:{key:"SiO2",density:2.32,name:"Silicon dioxide",c:{O:.532565,Si:.467435}},331:{key:"Skin",density:1.1,name:"Skin ICRP",c:{H:.100588,C:.22825,N:.04642,O:.619002,Na:7e-5,Mg:6e-5,P:33e-5,S:.00159,Cl:.00267,K:85e-5,Ca:15e-5,Fe:1e-5,Zn:1e-5}},332:{key:"C12H22O11",density:1.587,name:"Sucrose",c:{H:.064782,C:.421063,O:.514155}},333:{key:"C2F4",density:2.2,name:"Teflon",c:{C:.240178,F:.759822}},334:{key:"TlCl",density:7.004,name:"Thallium Chloride",c:{Cl:.147822,Tl:.852178}},335:{key:"C7H8",density:.8669,name:"Toluene",c:{H:.087515,C:.912485}},336:{key:"C2HCl3",density:1.46,name:"Trichloroethylene",c:{H:.007671,C:.182827,Cl:.809501}},337:{key:"WF6",density:2.4,name:"Tungsten Hexafluoride",c:{F:.382736,W:.617264}},338:{key:"UC2",density:11.28,name:"Uranium Dicarbide",c:{C:.091667,U:.908333}},339:{key:"UC",density:13.63,name:"Uranium Monocarbide",c:{C:.048035,U:.951965}},340:{key:"UO2",density:10.97,name:"Uranium Dioxide",c:{O:.118502,U:.881498}},341:{key:"Urea",density:1.323,c:{H:.067131,C:.2,N:.466459,O:.266411}},342:{key:"C5H11NO2",density:1.23,name:"Valine",c:{H:.094645,C:.512637,N:.119566,O:.273152}},343:{key:"C10H7I",density:1.738,name:"Iodonaphthalene",c:{C:.472737,H:.027771,I:.499492}},344:{key:"C21H24O4",density:1.18,name:"Bisphenol A diglycidyl ether",c:{C:.740938,H:.071062,O:.188}}},Get:function(e){return e<200||e>344?{}:s[e.toString()]},GetName:function(e){var t=s[e];return t.hasOwnProperty("key")?t.hasOwnProperty("name")?-1==t.key.indexOf("_")?t.name+" - "+t.key:t.name:t.key:""},GetZ:function(e){for(var t in s){if(s[t].hasOwnProperty("name")&&s[t].name.toLowerCase()==e.toLowerCase())return parseInt(t);if(s[t].key.toLowerCase()==e.toLowerCase())return parseInt(t)}return 0}},d=(l=[0,83748e-9,166322e-9,.534,1.848,2.37,2,.0011652,.00133151,.00158029,838505e-9,.971,1.74,2.699,2.33,2.2,2,.00299473,.00166201,.862,1.55,2.989,4.54,6.11,7.18,7.44,7.874,8.9,8.902,8.96,7.133,5.904,5.323,5.73,4.5,3.1028,.00347832,1.532,2.54,4.469,6.506,8.57,10.22,11.5,12.41,12.41,12.02,10.5,8.65,7.31,7.31,6.691,6.24,4.93,.00548536,1.873,3.5,6.154,6.657,6.71,6.9,7.22,7.46,5.243,7.9004,8.229,8.55,8.795,9.066,9.321,6.73,9.84,13.31,16.654,19.3,21.02,22.57,22.42,21.45,19.32,13.546,11.72,11.35,9.747,9.32,9.32,.00900662,1,5,10.07,11.72,15.37,18.95,20.25,19.84,13.67,13.51,14,10],{GetDensity:function(e){return e<1||e>98?0:l[e]}}),h=(c=[0,1.00794,4.0026,6.941,9.01218,10.811,12.0107,14.0067,15.9994,18.9984,20.1797,22.9898,24.305,26.9815,28.0855,30.9738,32.065,35.453,39.948,39.0983,40.078,44.9559,47.867,50.9415,51.9961,54.938,55.845,58.9332,58.6934,63.546,65.409,69.723,72.64,74.9216,78.96,79.904,83.798,85.4678,87.62,88.9059,91.224,92.9064,95.94,97.9072,101.07,102.906,106.42,107.868,112.411,114.818,118.71,121.76,127.6,126.904,131.293,132.905,137.327,138.905,140.116,140.908,144.24,144.913,150.36,151.964,157.25,158.925,162.5,164.93,167.259,168.934,173.04,174.967,178.49,180.948,183.84,186.207,190.23,192.217,195.078,196.967,200.59,204.383,207.2,208.98,208.982,209.987,222.018,223.02,226.025,227.028,232.038,231.036,238.029,237.048,244.064,243.061,247.07,247.07,251.08,252.083,257.095,258.098,259.101,262.11,261.109,262.114,266.122,264.125,269.134,268.139],{GetMass:function(e){return e<1||e>109?0:c[e]}}),p=p||{};p.container="mw-100 mw9-ns center ph2-ns",p.container_narrow="mw-100 mw8-ns center ph4-ns",p.my="my",p.table="my mw-8 centered",p.thead_tr="my",p.tr="my",p.th="my",p.td="my",p.div_column="flex flex-column items-center",p.div_row="flex flex-wrap",p.div_cell="pa2",p.div_cell_auto="pa2 w-auto",p.div_cell_full="w-100 pa2",p.div_cell_100="w-100 pa2",p.div_cell_20="w-100 w-20-l pa2-ns",p.div_cell_20a="w-auto w-20-l pa2-ns",p.div_cell_80="w-100 w-80-l pa2-ns",p.button_full="dib tc f5 w-100 ph3 pv2 link dim white bg-hcolor br3 mb2 pointer",p.button="dib tc f6 fl ph3 pv2 link dim white bg-hcolor br2 mb2 pointer",p.button_ns="dn dib-ns tc f6 fl ph3 pv2 link dim white bg-hcolor br2 mb2 pointer",p.button_inverted="dib f6 fl ph3 pv2 link dim white hcolor br2 mb2 pointer ba b--hcolor",p.button_pill="dib f6 ph3 pv2 link dim white bg-hcolor br-pill mb2 pointer",p.button_svg="f6 fl ph1 pv1 link dim pointer",p.card="db center mv2 br3 shadow-4",p.card_header="f5 bg-hcolor white pv2 ph3",p.card_main="f6 pa2 ba b--hcolor br3 br--bottom",p.box="db center br3 shadow-4",p.heading="f2",p.heading_medium="f3",p.h3="f4 b sans-serif w-100 mv1 tc",p.form_element="mt2 ml3 w-100 w-auto-ns",p.label="db f6 pa1",p.ul="list pl0",p.li="ph2",p.footer="fixed bg-near-black w-100 bottom-0",p.header="fixed bg-black w-100 ph1 pv1 pv2-ns ph2-ns",p.nav="pa2 bg-black overflow-hidden  br3 br--bottom mb1",p.nav_item="pointer dim f5 fw6 dib mh2 white link fl",p.nav_item_right="pointer dim f5 fw6 dib mh2 white link fr",p.color_error="text-error",p.error_badge="bg-dark-red pa2 ma2 br2 dib",p.padding_vertical="pv2",p.combine=function(e){return e.join(" ")};
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js */
var f=f||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),o=e.setImmediate||e.setTimeout,s=function(e){o(function(){throw e},0)},l=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(u,d,m){m||(u=c(u));var h,p=this,f="application/octet-stream"===u.type,v=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){s(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return h=t().createObjectURL(u),void o(function(){var e,t;n.href=h,n.download=d,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),v(),l(h),p.readyState=p.DONE},0);!function(){if((a||f&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,v()},n.readAsDataURL(u),void(p.readyState=p.INIT)}h||(h=t().createObjectURL(u)),f?e.location.href=h:e.open(h,"_blank")||(e.location.href=h);p.readyState=p.DONE,v(),l(h)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0);function v(e,t,n){var r;return function(){var i=arguments;clearTimeout(r),r=setTimeout(function(){r=null,e.apply(n||this,i)},t||250)}}function y(e,t,n){return m("a",{class:n||p.button,onclick:function(){m.route.set(t)}},e)}function g(e,t,n){return m("a",{class:n||p.button,onclick:t},e)}function _(e){return m("span",{class:p.color_error},e)}function b(e){return m("div",{class:p.error_badge},e)}function w(e,t){var n=new Blob(["string"==typeof e?e:JSON.stringify(e,null,"\t")],{type:"text/plain;charset=utf-8"});f(n,t)}function C(e,t){return[m("input",{class:"my-remove",type:"file",id:e.id,onchange:function(e){t(e.target.files[0]),e.target.value=null}}),m("a",{class:e.class,onclick:function(){document.getElementById(e.id).click()}},e.title)]}function k(e,t,n){return function(r){r.redraw=!1,t.call(n||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}}function x(e,t){return function(n){n.redraw=!1,e.call(t||this)}}var O={view:function(e){return m("article",{class:p.card,style:"overflow:hidden;"},[m("div",{class:p.card_header},e.attrs.title),m("div",{class:p.card_main},e.attrs.content)])}},E={visible:!1,off:function(e){document.getElementById(e).style.display="none",E.visible=!1},toggle:function(e){var t=document.getElementById(e);E.visible?t.style.display="none":t.style.display="block",E.visible=!E.visible},oninit:function(){E.visible=!1},view:function(e){var t=e.attrs,n=E.visible?t.title+" ^":t.title+" +";return m("div",{class:E.visible?p.combine([p.box,p.div_column]):p.div_column},[g(n,E.toggle.bind(e.state,t.id)),m("div",{class:p.div_cell,id:t.id,style:"display:none;"},t.content)])}},S={};function N(e){if(e>0&&e<99)return d.GetDensity(e);if(e>200){var t=u.Get(e);if(t.density)return t.density}return 0}S.oncreate=function(e){var t=e.attrs;if(t.values.length<1)return null;var n,r=(n=t.fig.id,[document.getElementById(n).clientWidth,document.getElementById(n).clientHeight]),i=r[0]-90,a=2*r[0]/3|0;i<400&&(i=400),a<300&&(a=300),t.fig.set_width(i),t.fig.set_height(a),t.fig.show()},S.view=function(e){var t=e.attrs;return t.values.length<1?null:m("div",{class:p.div_row},[t.plot_options?m("div",{class:p.div_cell_20},[m("label",{class:p.label},"Plot"),m("select",{onchange:m.withAttr("value",t.change_y_axis)},t.plot_options.map(function(e){return m("option",{value:e.value},e.name)}))]):null,m("div",{class:p.div_cell_80,id:t.fig.id})])};var F=function(e){var t=[];if(e.hasOwnProperty("c"))for(var n in e.c)e.c.hasOwnProperty(n)&&t.push([n,e.c[n]]);if(t.length)return m("table",{class:p.table},[m("thead",{},m("tr",{class:p.thead_tr},[m("th",{class:p.th},"Element"),m("th",{class:p.th},"Weight Fraction")])),m("tbody",{},[t.map(function(e){return m("tr",{class:p.tr},[m("td",{class:p.td},e[0]),m("td",{class:p.td},e[1])])})])])},A=function(e){if(this.name=e.name||"",this.symbol=e.symbol||"",this.A=e.A||"",this.mass=e.mass||"",this.Z=e.Z||"",this.rho=e.rho||0,this.th=e.th||0,this.gas=e.gas||!1,this.l=0,this.I=e.I||0,e.l)this.l=e.l;else{var t=parseFloat(e.rho);!isNaN(t)&&t>0&&(this.l=(parseFloat(e.th)/t/1e3).toFixed(4))}if(e.mass||(""===this.A?this.mass=h.GetMass(this.Z).toPrecision(5)||"":this.mass=NucData.GetNucData(parseInt(e.A),parseInt(e.Z)).M||""),0==this.symbol.length)if(this.Z<120)this.symbol=NucID.GetSymbol(this.A,this.Z);else{var n=u.Get(this.Z);this.symbol=n.key?n.key:"",this.mass="",this.A=""}};A.prototype.toArray=function(){var e=parseInt(this.Z);if(isNaN(e))return[];var t=parseFloat(this.rho);if(isNaN(t))return[];var n,r,i=parseFloat(this.th);if(isNaN(i))return[];if(""===this.mass||null===this.mass)n=0;else if(n=parseFloat(this.mass),isNaN(n)||n<0)return[];""===this.A||null===this.A?r=0:(r=parseFloat(this.A),(isNaN(r)||r<0)&&(r=0));var a=0;if(""!==this.I&&null!==this.I){var o=parseFloat(this.I);!isNaN(o)&&o>0&&(a=o)}return[r,e,t,i,this.gas?1:0,n,a]},A.prototype.toObject=function(){var e=parseInt(this.Z);if(isNaN(e))return{};var t=parseFloat(this.rho);if(isNaN(t))return{};var n,r,i=parseFloat(this.th);if(isNaN(i))return{};if(""===this.mass||null===this.mass)n=0;else if(n=parseFloat(this.mass),isNaN(n)||n<0)return{};""===this.A||null===this.A?r=0:(r=parseFloat(this.A),(isNaN(r)||r<0)&&(r=0));var a=0;if(""!==this.I&&null!==this.I){var o=parseFloat(this.I);!isNaN(o)&&o>0&&(a=o)}return{A:r,Z:e,rho:t,th:i,mass:n,gas:this.gas?1:0,I:a,name:this.name}};var T={};T.vm={layers:[],editindex:-1,thickness:0,length:0,calculate:function(){this.thickness=0,this.length=0;for(var e=0;e<this.layers.length;e++){var t=this.layers[e];this.thickness=this.thickness+parseFloat(t.th),this.length=this.length+parseFloat(t.l)}}},T.ui={},T.ui.changeSymbol=function(e,t){var n,r,i=T.vm.layers[e],a=NucID.GetNuc(t);(a[1]<1&&(i.Z="",i.A="",i.mass="",a[1]=u.GetZ(t)),a[0]>0&&(i.mass=NucData.GetNucData(a[0],a[1]).M.toPrecision(7),i.A=a[0].toString()),0===a[0]&&a[1]>0&&(i.A="",i.mass=h.GetMass(a[1]).toPrecision(7)),a[1]>0)&&(i.Z=a[1].toString(),r=(n=N(a[1]))<.01&&n>0?1:0,i.rho=n,i.gas=r);i.symbol=t,this.changel(e,i.l)},T.ui.changeZ=function(e,t){var n=T.vm.layers[e],r=parseInt(t);if(n.Z=t,n.I="",isNaN(r)||r<1)return n.A="",n.mass="",void(n.symbol="");var i,a,o,s=parseInt(n.A);if((isNaN(s)||s<1)&&(s=0),r<120&&(i=NucID.GetSymbol(s,r),T.vm.layers[e].mass=s>0?NucData.GetNucData(s,r).M.toPrecision(7):h.GetMass(r).toPrecision(7)),r>200){var l=u.Get(r);i=l.key?l.key:"",T.vm.layers[e].mass="",T.vm.layers[e].A=""}o=(a=N(r))<.01&&a>0?1:0,n.symbol=i,n.rho=a,n.gas=o,this.changel(e,n.l)},T.ui.changeA=function(e,t){var n=T.vm.layers[e],r=parseInt(t),i=parseInt(n.Z);if(isNaN(r)||r<0){var a=NucID.GetSymbol(0,i);return n.symbol=a,n.A="",n.mass=h.GetMass(i).toPrecision(7),void m.redraw()}n.A=r;var o=NucID.GetSymbol(r,i);n.symbol=o;var s=NucData.GetNucData(r,i);s.M?n.mass=s.M.toPrecision(7):n.mass="",this.changel(e,n.l),m.redraw()},T.ui.changerho=function(e,t){var n=T.vm.layers[e],r=parseFloat(t),i=parseFloat(n.l);if(n.rho=t,!(isNaN(r)||r<0)){var a=i*r*1e3;n.th=a.toPrecision(3),m.redraw()}},T.ui.changel=function(e,t){var n=T.vm.layers[e],r=parseFloat(t),i=parseFloat(n.rho),a=parseFloat(n.th);n.l=t,isNaN(r)||r<0||isNaN(i)||i<0||(a=r*i*1e3,n.th=a.toPrecision(4),m.redraw())},T.ui.changeth=function(e,t){var n=T.vm.layers[e],r=parseFloat(t),i=parseFloat(n.rho),a=parseFloat(n.l);n.th=t,isNaN(r)||r<0||isNaN(i)||i<0||(a=r/i/1e3,n.l=a.toPrecision(4),m.redraw())},T.ui.Remove=function(e){-1==T.vm.editindex&&(T.vm.layers.splice(e,1),j.clear_cache(),j.Save(),T.vm.calculate(),m.redraw())},T.ui.Add=function(){T.vm.editindex=T.vm.layers.length,T.vm.layers.push(new A({symbol:"",name:"",A:"",Z:"",mass:"",rho:0,th:0,gas:!1}))},T.ui.Down=function(e){if(!(e>=T.vm.layers.length-1)&&-1==T.vm.editindex){var t=T.vm.layers[e];T.vm.layers[e]=T.vm.layers[e+1],T.vm.layers[e+1]=t,j.clear_cache(),j.Save(),m.redraw()}},T.ui.Up=function(e){if(!(e<1)&&-1==T.vm.editindex){var t=T.vm.layers[e];T.vm.layers[e]=T.vm.layers[e-1],T.vm.layers[e-1]=t,j.clear_cache(),j.Save(),m.redraw()}},T.ui.EditDone=function(){var e=T.vm.layers[T.vm.editindex];""===e.Z&&(alert("Wrong matter defined, matter removed"),T.vm.editindex=-1,T.ui.Remove(T.vm.editindex)),""===e.name&&(e.name="Material_"+T.vm.editindex),isNaN(parseFloat(e.l))&&(e.l=0,e.th=0),isNaN(parseFloat(e.th))&&(e.l=0,e.th=0),isNaN(parseFloat(e.rho))&&(e.rho=N(e.Z)),e.l=parseFloat(e.l),e.th=parseFloat(e.th),e.rho=parseFloat(e.rho),T.vm.editindex=-1,j.clear_cache(),j.Save(),T.vm.calculate()},T.ui.Edit=function(e){-1==T.vm.editindex&&(T.vm.editindex=e,m.redraw())},T.view=function(e){var t,n,r,i,a=e.state.vm,o=e.state.ui;return a.editindex>-1?(t=a.layers[a.editindex],n=a.editindex,r=o,m("div",{onkeyup:(i=r.EditDone.bind(r),function(e){e.redraw=!1,27===e.keyCode&&(i(),m.redraw())})},[m("div",{class:p.h3},"Material #"+n),m("div",{class:p.div_row},[m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_name",title:"Name of the matter, ie vacuum window, this is optional"},"Name"),m("input",{type:"text",style:"width:10em;",placeholder:"optional name",id:"input_material_name",oninput:function(e){e.redraw=!1,t.name=e.currentTarget.value},value:t.name})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_symbol",title:"Type element or nucleus symbol or compund matter ie air, P10, water..."},"Symbol"),m("input",{type:"text",style:"width:10em",placeholder:"i.e. Fe, 12C",id:"input_material_symbol",oninput:m.withAttr("value",r.changeSymbol.bind(r,n)),value:t.symbol})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_A",title:"Mass number or leave empty or zero for natural target"},"A"),m("input",{type:"text",style:"width:7em;",id:"input_material_A",oninput:k("value",r.changeA.bind(r,n)),value:t.A})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_Z"},"Z"),m("input",{type:"text",style:"width:7em;",id:"input_material_Z",oninput:m.withAttr("value",r.changeZ.bind(r,n)),value:t.Z<200?t.Z:""})])]),m("div",{class:p.div_row},[m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_mass"},m.trust("mass<br>(u)")),m("input",{type:"text",style:"width:7em;",id:"input_material_mass",oninput:function(e){e.redraw=!1,t.mass=e.currentTarget.value},value:t.mass})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_rho"},m.trust("density<br>(g/cm<sup>3</sub>)")),m("input",{type:"text",style:"width:7em;",id:"input_material_rho",oninput:k("value",r.changerho.bind(r,n)),value:t.rho})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_th"},m.trust("Thickness<br>(mg/cm<sup>2</sub>)")),m("input",{type:"text",style:"width:7em;",id:"input_material_th",oninput:k("value",r.changeth.bind(r,n)),value:t.th})]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_l"},m.trust("Length<br>(cm)")),m("input",{type:"text",style:"width:7em;",id:"input_material_l",oninput:k("value",r.changel.bind(r,n)),value:t.l})]),m("div",{class:p.form_element},[m("label",{class:p.label},m.trust("Thickness<br>calculator")),m(M,{index:n})])]),m("div",{class:p.combine([p.div_row,"items-center mt2"])},[m("div",{class:p.div_cell_20},m("a",{class:p.button_full,onclick:r.EditDone.bind(r)},"Done")),m("div",{class:p.div_cell_80},["Compounds:",function(e){var t=[];for(var n in u.map){var r;r=u.GetName(n),t.push([n,r])}return t.sort(function(e,t){return e[1].localeCompare(t[1])}),m("select",{id:"id_compound_select",class:"db w-100",onchange:m.withAttr("value",e.onchange)},m("option",{value:""},"Add Compound"),t.map(function(e){return m("option",{value:e[0]},e[1])}))}({onchange:r.changeZ.bind(r,n)})])]),t.Z>200?m("div",{class:p.combine([p.div_row,"items-center justify-center"])},[m("div",{class:p.div_cell},[m("div",{class:p.h3},u.GetName(t.Z)),F(u.Get(t.Z))]),m("div",{class:p.form_element},[m("label",{class:p.label,for:"input_material_I",title:"Mean Ionization Potential in eV or empty for elemental ionization potentials"},"<I>",m("input",{class:"db",type:"text",style:"width:7em;",id:"input_material_I",onkeyup:function(e,t){return function(n){n.redraw=!1,13===n.keyCode?(e(),m.redraw()):27===n.keyCode&&(t(),m.redraw())}}(r.EditDone.bind(r),r.EditDone.bind(r)),oninput:function(e){if(e.redraw=!1,0!=e.currentTarget.value.length){var n=parseFloat(e.currentTarget.value);!isNaN(n)&&n>0&&(t.I=n,m.redraw())}else t.I=0},value:t.I>0?t.I:""}))]),m("div",{class:p.div_cell},m("a",{href:"physics.html#compounds",target:"_blank",title:"Bragg Rules is used to calculate energy loss of compounds. For custom non-elemental Ionization potential enter the mean I value in eV units or leave empty, click for more details"},m.trust('<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>')))]):null])):m("div",{style:"overflow-x:auto;"},[m("table",{class:p.table},[m("thead",{class:""},[m("tr",[m("th",{class:p.th},"#"),m("th",{class:p.th},"name"),m("th",{class:p.th},"matter"),m("th",{class:p.th},m.trust("density<br>(g/cm<sup>3</sub>)")),m("th",{class:p.th},m.trust("thick.<br>(mg/cm<sup>2</sup>)")),m("th",{class:p.th},m.trust("thick.<br>(cm)")),m("th",{class:p.th},"")])]),m("tbody",a.layers.map(function(e,t){return m("tr",{class:p.tr,ondblclick:o.Edit.bind(o,t)},[m("td",{class:p.td},t),m("td",{class:p.td},e.name),m("td",{class:p.td},e.symbol),m("td",{class:p.td},e.rho),m("td",{class:p.td},e.th>0?e.th:_(e.th)),m("td",{class:p.td},e.l>0?e.l:_(e.l)),m("td",{class:p.td},m("span",{class:"flex flex-row dib bg-moon-gray br-pill ph2"},[m("a",{class:p.button_svg,onclick:x(o.Up.bind(o,t)),title:"Move Up"},m.trust('<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/></svg>')),m("a",{class:p.button_svg,onclick:x(o.Down.bind(o,t)),title:"Move Down"},m.trust('<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z" fill="#010101"/></svg>')),m("a",{class:p.button_svg,onclick:x(o.Edit.bind(o,t)),title:"Edit"},m.trust('<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>')),m("a",{class:p.button_svg,onclick:x(o.Remove.bind(o,t)),title:"Delete"},m.trust('<svg height="24" width="24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>'))]))])}))]),m("div",{class:p.combine([p.div_row,p.padding_vertical])},[m("div",{class:p.div_cell_20},m("a",{class:p.button_pill,onclick:o.Add.bind(o)},"Add Matter")),m("div",{class:p.div_cell_80},a.layers.length?m("div",["Total thickness = "+a.thickness.toFixed(3)+" mg/cm2",m("br"),"Total length = "+a.length.toFixed(3)+" cm"]):null)]),m("span",[C({class:p.button,id:"loadmatter",title:"Add from File"},j.AddLayersFromFile),a.layers.length?[g("Save as MOCADI",function(){w(j.MOCADIstr(),"input.in")},p.button_ns),y("Plots","/plot")]:null])])};var B={th:0,l:0,calculate_th:function(e,t,n){var r=T.vm.layers[e].rho;r=parseFloat(r);var i=parseFloat(n);isNaN(i)||i<0?console.log("could not parse number"):L.get_energy_out().then(function(t){return e>=t.length?-1:e>0?t[e-1]:j.projectile.state.T}).then(function(n){B.th=-1,B.l=-1,n<0||0==t&&i>n||1==t&&i>1||L.get_data(L.prepare_one(e)).then(function(e){var a=new spline(e[0].energy,e[0].range);B.th=0==t?1e3*(a.at(n)-a.at(i)):a.at(n)*i*1e3,B.l=B.th/r/1e3,m.redraw()})})}},M={submit:function(e,t,n){t>0&&(T.ui.changeth(e,t.toFixed(2)),n&&n.apply(this))},oninit:function(){B.th=0,B.l=0},view:function(e){var t=e.attrs.index,n=B;return m(E,{id:"_thcal",title:"Calculate",content:m("div",{class:p.div_column},[y("Show Plots","/materialplot"),m("div","Adjust thickness to: "),m("label",{class:p.label,for:"input_Eout",title:"Enter Energy after material"},"Eout (MeV/u)"),m("input",{type:"text",style:"width:7em;",id:"input_Eout",oninput:k("value",v(n.calculate_th.bind(e.state,t,0),500))}),m("label",{class:p.label,for:"input_RangeFraction",title:"Enter Fraction of Range"},"th/range"),m("input",{type:"text",style:"width:7em;",id:"input_RangeFraction",oninput:k("value",v(n.calculate_th.bind(e.state,t,1),500))}),n.th>=0?m("div",{class:p.div_cell},["Th. = "+n.th.toFixed(2),m.trust(" mg/cm<sup>2</sup><br>"),"Length    = "+n.l.toFixed(5)+" cm"]):m("div",_("Wrong value!")),n.th>0?g("Submit Thickness",e.state.submit.bind(e.state,t,n.th,E.off.bind(this,"_thcal"))):null])})}},I=function(){function e(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}return{available:e(),save:function(t,n){return!(!e||void 0==n||(localStorage.setItem(t,JSON.stringify(n)),0))},load:function(t){return e?JSON.parse(localStorage.getItem(t)):null},remove:function(e){localStorage.removeItem(e)}}}(),H=n(0),P=n.n(H),j=j||{};j.state={},j.state.nuc="",j.state.T=0,j.state.matter=[],j.state.config=new o,j.info="",j.projectile=new SharpCalculator,j.projectile.Set.T(100),j.MatterEditor=T,window.App=j,j.LoadJSONFile=function(e){var t=new FileReader;t.onload=function(e){try{j.Load(JSON.parse(e.target.result)),j.Save()}catch(e){alert("Failed to load file")}finally{m.redraw()}},t.readAsText(e)},j.AddLayersFromFile=function(e){var t=new FileReader;t.onload=function(e){try{j.AddLayers(JSON.parse(e.target.result)),j.Save()}catch(e){alert("Failed to add material layers"),j.report(e)}finally{m.redraw()}},t.readAsText(e)},j.get_editindex=function(){return T.vm.editindex},j.Load=function(e){e&&(e.nuc&&Array.isArray(e.nuc)&&j.projectile.SetNucleus(e.nuc[0],e.nuc[1],e.nuc[2]),e.T&&j.projectile.Set.T(e.T),e.projectile&&e.projectile.hasOwnProperty("A")&&e.projectile.hasOwnProperty("Z")&&(j.projectile.SetNucleus(e.projectile.A,e.projectile.Z,e.projectile.Q),e.projectile.hasOwnProperty("T")&&j.projectile.Set.T(e.projectile.T)),T.vm.layers.length=0,j.AddLayers(e),T.vm.calculate(),e.config&&j.state.config.set(e.config),j.loaded=!0,j.Save())},j.AddLayers=function(e){if(e.matter)for(var t=0;t<e.matter.length;t++){var n=e.matter[t];if(Array.isArray(n)){var r={};r.name="matter"+t,r.A=n[0],r.Z=n[1],r.rho=n[2],r.th=n[3],r.gas=n[4],r.mass=n[5],r.I=n[6],T.vm.layers.push(new A(r))}else T.vm.layers.push(new A(n))}},j.Save=function(){j.state.nuc=j.projectile.GetNucleus(),j.state.T=j.projectile.state.T,j.state.matter=T.vm.layers,j.state.units=[1,1e3,1],I.save("state",j.state)},j.DeleteStorage=function(){localStorage.clear()},j.MOCADIstr=function(){var e=j.projectile.GetNucleus(),t=j.projectile.state.T,n=T.vm.layers,r="epax 2\natima-1.0\noption listmode tree\n";r=r+"BEAM\n20000\n"+t+", 0, "+e[0]+", "+e[1]+", "+(e[1]-e[2])+"\n",r+="2\n0, 0, 0, 0, 0\n",r+="2\n0, 0, 0, 0, 0\n",r+="2\n0, 0, 0, 0, 0\n",r+="*\nERWARTUNGSWERTE START\nSAVE START";for(var i=0;i<n.length;i++){var a="\n*** "+n[i].name+" ***\nMATTER\n"+(n[i].A||0)+", "+n[i].Z+", "+1e3*n[i].rho;a=a+"\n3, "+n[i].th,a+="\n0\n0, 0, 0",r+=a+="\n1, 1, 0\n0"}return r+="\n*\nERWARTUNGSWERTE END\nSAVE END",r+="\nEND"},j.fileapi=!1,j.datavalid=!1,j.loaded=!1,j.clear_cache=function(){j.datavalid=!1,L&&L.clear()},j.CheckBrowser=function(){var e=!0;return window.FileReader||(e=!1),window.localStorage||(e=!1),e},j.load_config=function(e){return L.load_config(e).then(function(t){!t.error&&t.input||(alert("Failed to load remote configuration:"+t.error),j.report("failed to load remote config, uid="+e)),j.Load(t.input)}).catch(function(){alert("Failed to load remote configuration"),j.report("failed to load remote config, uid="+e)})},j.report=function(e,t){console.log(e);var n=null;t&&(n={extra:t}),"string"==typeof e?P.a.captureMessage(e,n):P.a.captureException(e,n)};var L={energy_min:.001,energy_max:1e5,epsilon:1e-9,url:"https://isotopea.com/api/catima/",check_material_duplicate:function(e,t){return e.some(function(e){return e.A==t.A&&e.Z==t.Z&&e.mass==t.mass})},prepare:function(e,t){var n={},r=j.projectile.state,i=j.MatterEditor.vm.layers;if(i.length<1||r.T<.001)return{};n.projectile={mA:r.mA,A:r.A,Z:r.Z,Q:r.Q,T:r.T},n.matter=[];for(var a=0;a<i.length;a++){var o=i[a].toObject(),s=!1;e&&(s=L.check_material_duplicate(n.matter,o)),t?i[a].rho>0&&i[a].th>0&&(e&&s||n.matter.push(o)):e&&s||n.matter.push(o)}return j.state.config&&(n.config=j.state.config),n},prepare_one:function(e){var t={},n=j.projectile.state,r=j.MatterEditor.vm.layers;if(r.length<1||n.T<.001)return{};if(t.projectile={mA:n.mA,A:n.A,Z:n.Z,Q:n.Q,T:n.T},t.matter=[],e>=r.length)return{};var i=r[e].toObject();return r[e].rho>0&&t.matter.push(i),j.state.config&&(t.config=j.state.config),t},check_cache:function(e){for(var t=[],n=0;n<L.data.length;n++){var r=L.data[n];if(r.Zm>200&&r.Zm==e.Z){if(r.I>0&&e.I!=r.I)continue;t.push(r);break}if(r.Zm==e.Z&&r.Am==e.A&&Math.abs(r.M-e.mass)<L.epsilon){if(r.I>0&&e.I!=r.I)continue;t.push(r);break}}return t},data:[],clear:function(){L.data=[]},check_input:function(e){return!(!e.projectile&&e.projectile.T>0)&&(!(!e.matter||!Array.isArray(e.matter))&&!(e.matter.length<1))},calculate:function(e){return L.check_input(e)?m.request({method:"POST",url:L.url+"calculate",data:e,background:!0}).then(function(e){return e},function(){return j.report("Catima could not retrieve data"),{error:"Failed to retrieve data"}}):(j.report("wrong input",e),Promise.resolve({}))},get_data:function(e){if(!L.check_input(e))return j.report("wrong input",e),Promise.resolve([]);if(1==e.matter.length){var t=L.check_cache(e.matter[0]);if(1==t.length)return Promise.resolve(t)}return m.request({method:"POST",url:L.url+"data",data:e,background:!1}).then(function(e){if(!e.data)return[];L.data=[];for(var t=0;t<e.data.length;t++){var n={};n.energy=new Float32Array(e.energy),n.projectile=e.projectile,n.dEdx=new Float32Array(e.data[t].dEdx),n.range=new Float32Array(e.data[t].range);var r=parseInt(e.data[t].Zm),i=parseFloat(e.data[t].Am);n.Am=i,n.Zm=r,n.M=e.data[t].M,n.I=e.data[t].I?e.data[t].I:0,L.data.push(n)}return L.data},function(){return[]})},energy_out:function(e,t,n,r){var i=r.at(e),a=n.at(e);if(i<t)return 0;var o=e-t*a;if(o<.001)return 0;for(var s=0;s<100;s++){var l=i-r.at(o)-t;if(Math.abs(l)<1e-4)return o;if((o-=-l*a)<.001)return 0;a=n.at(o)}return-1},Eout_vs_thickness:function(e,t){var n=new spline(e.energy,e.dEdx),r=new spline(e.energy,e.range),i=r.at(t),a=100;a>1e3&&(a=1e3),a<10&&(a=10);var o=t/a;o<.001&&(o=.001);var s=new Float32Array(a),l=new Float32Array(a),c=new Float32Array(a),u=new Float32Array(a),d=t;s[0]=0,l[0]=d,c[0]=0,u[0]=n.at(t);for(var m=1;m<a;m++){d-=o,l[m]=d;var h=i-r.at(d);s[m]=h;var p=t-d;c[m]=p*e.projectile.A,u[m]=n.at(d)}return[s,l,c,u]},get_energy_out:function(){var e=j.MatterEditor.vm.layers;return 1==e.length&&0==e[0].th?Promise.resolve([j.projectile.state.T]):L.get_data(L.prepare()).then(function(){for(var t=[],n=j.projectile.state.T,r=0;r<e.length;r++){var i=L.check_cache(e[r]);if(1!=i.length)return console.log("cache not found?, length = "+i.length),j.report("Cache not found? "+i.length),[];var a=L.Eout_vs_thickness(i[0],n);n=new spline(a[0],a[1]).at(.001*e[r].th),t.push(n)}return t})},load_config:function(e){return m.request({method:"POST",url:L.url+"load",data:{id:e}})}},R={};function D(e){return m("div",{class:p.form_element},[m("label",{class:p.label,for:e.id},e.label),m("input",{class:"db",id:e.id||"_id"+e.label,value:e.value,type:e.type||"text",placeholder:e.placeholder||"",style:e.style||"",oninput:e.oninput})])}R.ui={},R.nuc={},R.oninit=function(){R.nuc=j.projectile,R.ui.uiupdate(),j.clear_cache()},R.ui.uiupdate=function(){R.ui.Symbol=R.nuc.state.Symbol,R.ui.A=R.nuc.state.A,R.ui.Z=R.nuc.state.Z,R.ui.Q=R.nuc.state.Q,R.ui.T=R.nuc.state.T.toFixed(4),R.ui.Brho=R.nuc.state.Brho.toFixed(4),R.ui.Beta=R.nuc.state.Beta.toFixed(6),R.ui.Gamma=R.nuc.state.Gamma.toFixed(5),R.ui.P=R.nuc.state.P.toFixed(3),R.ui.Nth=R.nuc.state.Nth.toFixed(4),isNaN(R.ui.Nth)&&(R.ui.Nth=""),j.clear_cache()},R.ui.changesymbol=function(e){R.ui.Symbol=e,R.nuc.SetNucleusSymbol(e)&&R.ui.uiupdate()},R.ui.changeA=function(e){R.ui.A=e;var t=parseFloat(e);!isNaN(t)&&R.nuc.Set.A(t)&&(R.ui.uiupdate(),R.ui.A=e)},R.ui.changeZ=function(e){R.ui.Z=e;var t=parseFloat(e);!isNaN(t)&&R.nuc.Set.Z(t)&&(R.ui.uiupdate(),R.ui.Z=e)},R.ui.changeQ=function(e){R.ui.Q=e;var t=parseFloat(e);!isNaN(t)&&R.nuc.Set.Q(t)&&(R.ui.uiupdate(),R.ui.Q=e)},R.ui.changeT=function(e){R.ui.T=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.T(t)&&(R.ui.uiupdate(),R.ui.T=e)},R.ui.changeBeta=function(e){R.ui.Beta=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.Beta(t)&&(R.ui.uiupdate(),R.ui.Beta=e)},R.ui.changeGamma=function(e){R.ui.Gamma=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.Gamma(t)&&(R.ui.uiupdate(),R.ui.Gamma=e)},R.ui.changeBrho=function(e){R.ui.Brho=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.Brho(t)&&(R.ui.uiupdate(),R.ui.Brho=e)},R.ui.changeP=function(e){R.ui.P=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.P(t)&&(R.ui.uiupdate(),R.ui.P=e)},R.ui.changeNth=function(e){R.ui.Nth=e;var t=parseFloat(e);isNaN(t)||R.nuc.Set.Nth(t)&&(R.ui.uiupdate(),R.ui.Nth=e)},R.ui.done=function(){R.nuc.state.T>L.energy_max&&(alert("Maximal allowed energy is "+L.energy_max+" MeV/u"),R.nuc.Set.T(L.energy_max)),R.nuc.state.T<L.energy_min&&alert("Set Energy more than "+L.energy_min+" MeV/u"),j.Save(),m.route.set("/")},R.view=function(e){var t=function(e){return m("div",{class:p.div_cell},e)},n=e.state.ui,r=NucData.GetNucData(R.nuc.state.A,R.nuc.state.Z),i=NucData.GetNucS(R.nuc.state.A,R.nuc.state.Z);return m("div",[m("h2","Projectile"),m("div",{class:p.div_row},[t(D({label:"Symbol",placeholder:"ie 12C",style:"width:7em",value:n.Symbol,oninput:m.withAttr("value",n.changesymbol,n)})),t(D({label:"A",style:"width:7em",value:n.A,oninput:m.withAttr("value",n.changeA,n)})),t(D({label:"Z",style:"width:7em",value:n.Z,oninput:m.withAttr("value",n.changeZ,n)})),t(D({label:"Q",style:"width:7em",value:n.Q,oninput:m.withAttr("value",n.changeQ,n)}))]),m("div",{class:p.div_row},[t(D({label:"Energy [MeV/u]",style:"width:7em",value:n.T,oninput:m.withAttr("value",n.changeT,n)})),t(D({label:"Brho [Tm]",style:"width:7em",value:n.Brho,oninput:m.withAttr("value",n.changeBrho,n)})),t(D({label:m.trust("&#946;"),style:"width:7em",value:n.Beta,oninput:m.withAttr("value",n.changeBeta,n)})),t(D({label:m.trust("&#947;"),style:"width:7em",value:n.Gamma,oninput:m.withAttr("value",n.changeGamma,n)}))]),m("div",{class:p.div_row},[t(D({label:m.trust("p [MeV/c]"),style:"width:7em",value:n.P,oninput:m.withAttr("value",n.changeP,n)})),t(D({label:m.trust("n<sub>th</sub>"),style:"width:7em",value:n.Nth,oninput:m.withAttr("value",n.changeNth,n)}))]),m("div",{class:p.div_row},[m("ul",{class:p.ul},[m("li",{class:p.li},"mA = ",R.nuc.state.mA.toFixed(5)+" u"),m("li",{class:p.li},"A/Q = ",R.nuc.state.AoQ.toFixed(5)),r.hasOwnProperty("T")?m("li",{class:p.li},"half life = ",r.T):null,i.hasOwnProperty("Sn")?m("li",{class:p.li},"Sn = ",i.Sn.toFixed(3)+" MeV"):null,i.hasOwnProperty("Sp")?m("li",{class:p.li},"Sp = ",i.Sp.toFixed(3)+" MeV"):null,i.hasOwnProperty("S2n")?m("li",{class:p.li},"S2n = ",i.S2n.toFixed(3)+" MeV"):null,i.hasOwnProperty("S2p")?m("li",{class:p.li},"S2p = ",i.S2p.toFixed(3)+" MeV"):null,r.hasOwnProperty("M")?null:m("li",{class:p.li},"warning: Nucleus was not found in the AME16 database")])]),m("div",{class:p.div_row},m("div",{class:p.div_cell},g("Done",n.done)))])};var G={view:function(e){var t=e.attrs.nucleus.state;return m("div",{class:p.div_column},[m("span",{class:p.h3},m.trust(t.Symbol+"<sup>"+t.Q+"+</sup>")),m("p",["T = ",t.T<.001?_(t.T.toPrecision(6)):t.T.toPrecision(6)," MeV/u",m("br"),m.trust("B&#961= "),t.Brho.toPrecision(6)," Tm",m("br"),"mA = ",t.mA.toFixed(5)," u",m("br"),"A/Q = ",t.AoQ.toFixed(4),m("br")]),y("Change","/nucchange")])}},Z=!1;function U(){return(e=["https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2","https://cdn.jsdelivr.net/npm/vega-lite@2.5.0","https://cdn.jsdelivr.net/npm/vega-embed@3.14.0"],t=[],e.forEach(function(e){var n=new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.async=!1,r.onload=function(){t()},r.onerror=function(){n()},document.head.appendChild(r)});t.push(n)}),Promise.all(t)).then(function(){return Z=!0});var e,t}function z(e){this.id=e.id||"catimaplot",this.values=e.values||[],this.specs={$schema:"https://vega.github.io/schema/vega-lite/v2.json",title:"",autosize:{type:"fit"},width:e.width||800,height:e.height||600,data:{values:this.values},selection:{grid:{type:"interval",bind:"scales"}},mark:e.mark||"circle",encoding:{x:{field:e.x||"",type:"quantitative",scale:{type:e.x_axis_type||"linear",zero:!1},axis:{title:e.x_label||""}},y:{field:e.y||"",type:"quantitative",scale:{type:e.y_axis_type||"linear",zero:!1},axis:{title:e.y_label||""}},color:{field:e.color||"",type:"nominal",legend:e.legend||null}}}}z.prototype.set_values=function(e){this.specs.data.values=e},z.prototype.set_width=function(e){this.specs.width=e},z.prototype.set_height=function(e){this.specs.height=e},z.prototype.set_title=function(e){this.specs.title=e},z.prototype.set_x=function(e,t){this.specs.encoding.x.field=e,t&&this.set_x_label(t)},z.prototype.set_x_label=function(e){this.specs.encoding.x.axis.title=e},z.prototype.set_x_axis_type=function(e){this.specs.encoding.x.scale.type=e},z.prototype.set_y_axis_type=function(e){this.specs.encoding.y.scale.type=e},z.prototype.set_y=function(e,t){this.specs.encoding.y.field=e,t&&this.set_y_label(t)},z.prototype.set_y_label=function(e){this.specs.encoding.y.axis.title=e},z.prototype.set_color_field=function(e){this.specs.encoding.color.field=e},z.prototype.set_legend_title=function(e){this.specs.encoding.color.legend.title=e},z.prototype.show=function(){if(Z)vegaEmbed("#"+this.id,this.specs,{mode:"vega-lite",actions:!1});else{var e=this;U().then(function(){vegaEmbed("#"+e.id,e.specs,{mode:"vega-lite",actions:!1})})}};var V={x:"energy",y:"dEdx",x_axis_type:"log",y_axis_type:"log",x_label:"Energy (MeV/u)",y_label:"dE/dx [MeV/g/cm2]",color:"material"},K={values:[],status:"",reset:function(){K.fig=new z(V),K.values=[],K.status=""},update:function(){K.fig.show()},sort:function(e){K.values=[],console.log(e),e.length<1||(e.forEach(function(e){for(var t=1;t<e.energy.length;t++){var n=e.Zm<201?NucID.GetSymbol(e.Am,e.Zm):u.Get(e.Zm).name;K.values.push({energy:e.energy[t],dEdx:e.dEdx[t],range:e.range[t],material:n})}}),K.fig.set_title("projectile: "+j.projectile.GetNucleusSymbol()),K.fig.set_values(K.values))},plot_options:[{value:"dEdx",name:"dEdx"},{value:"range",name:"Range"}],change_y_axis:function(e){"dEdx"==e&&(K.fig.specs.encoding.y.axis.title="dE/dx [MeV/g/cm2]",K.fig.specs.encoding.y.field=e,K.fig.specs.encoding.y.scale.type="log"),"range"==e&&(K.fig.specs.encoding.y.axis.title="range [g/cm2]",K.fig.specs.encoding.y.field=e,K.fig.specs.encoding.y.scale.type="log"),K.update()}},q={x:"th",y:"Eout",x_label:"thickness (MeV/u)",y_label:"Energy out (MeV/u)",color:"material"},W={values:[],status:"",reset:function(){W.fig=new z(q),W.values=[],W.status=""},update:function(){W.fig.show()},sort:function(e){if(W.values=[],1==e.length){for(var t=e[0],n=L.Eout_vs_thickness(t,j.projectile.state.T),r=0;r<n[0].length;r++){var i=t.Zm<201?NucID.GetSymbol(t.Am,t.Zm):u.Get(t.Zm).name;W.values.push({th:n[0][r],Eout:n[1][r],Eloss:n[2][r],dEdx:n[3][r],material:i})}W.fig.set_values(W.values)}},plot_options:[{value:"Eout",name:"Energy after"},{value:"Eloss",name:"Energy loss"},{value:"dEdx",name:"dEdx"}],change_y_axis:function(e){"Eout"==e&&(W.fig.specs.title="Energy after material, projectile: "+j.projectile.GetNucleusSymbol()+", T = "+j.projectile.state.T+"MeV/u",W.fig.specs.encoding.y.axis.title="Eout [MeV/u]",W.fig.specs.encoding.y.scale.type="linear",W.fig.specs.encoding.y.field=e),"Eloss"==e&&(W.fig.specs.title="Energy loss in material, projectile: "+j.projectile.GetNucleusSymbol()+", T = "+j.projectile.state.T+"MeV/u",W.fig.specs.encoding.y.axis.title="Energy loss [MeV]",W.fig.specs.encoding.y.scale.type="linear",W.fig.specs.encoding.y.field=e),"dEdx"==e&&(W.fig.specs.title="Energy loss in material, projectile: "+j.projectile.GetNucleusSymbol()+", T = "+j.projectile.state.T+"MeV/u",W.fig.specs.encoding.y.axis.title="dEdx [MeV/g/cm2]",W.fig.specs.encoding.y.scale.type="log",W.fig.specs.encoding.y.field=e),W.update()}},J={view:function(){return m("div",{class:p.div_column},[m("div",{class:p.form_element},[m("h1",{class:p.heading_medium},"Presets:"),a.map(function(e){return j.state.config.is_same(e.config)?g(e.name):m("a",{class:p.button_inverted,onclick:function(){j.state.config.set(e.config),j.clear_cache(),j.Save()}},e.name)})]),m("div",{class:p.form_element},y("Done","/"))])}},Q=function(){var e,t=document.createElement("tingle-test-transition"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}();function $(e){this.opts=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}({},{onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:"Close",closeMethods:["overlay","button","escape"]},e),this.init()}function X(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+"px",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+"px")}$.prototype.init=function(){this.modal||(function(){this.modal=document.createElement("div"),this.modal.classList.add("tingle-modal"),(0===this.opts.closeMethods.length||-1===this.opts.closeMethods.indexOf("overlay"))&&this.modal.classList.add("tingle-modal--noOverlayClose");this.modal.style.display="none",this.opts.cssClass.forEach(function(e){"string"==typeof e&&this.modal.classList.add(e)},this),-1!==this.opts.closeMethods.indexOf("button")&&(this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.classList.add("tingle-modal__close"),this.modalCloseBtnIcon=document.createElement("span"),this.modalCloseBtnIcon.classList.add("tingle-modal__closeIcon"),this.modalCloseBtnIcon.innerHTML="×",this.modalCloseBtnLabel=document.createElement("span"),this.modalCloseBtnLabel.classList.add("tingle-modal__closeLabel"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel));this.modalBox=document.createElement("div"),this.modalBox.classList.add("tingle-modal-box"),this.modalBoxContent=document.createElement("div"),this.modalBoxContent.classList.add("tingle-modal-box__content"),this.modalBox.appendChild(this.modalBoxContent),-1!==this.opts.closeMethods.indexOf("button")&&this.modal.appendChild(this.modalCloseBtn);this.modal.appendChild(this.modalBox)}.call(this),function(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:function(e){-1!==this.opts.closeMethods.indexOf("overlay")&&!function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(e.target,"tingle-modal")&&e.clientX<this.modal.clientWidth&&this.close()}.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:function(e){-1!==this.opts.closeMethods.indexOf("escape")&&27===e.which&&this.isOpen()&&this.close()}.bind(this)},-1!==this.opts.closeMethods.indexOf("button")&&this.modalCloseBtn.addEventListener("click",this._events.clickCloseBtn);this.modal.addEventListener("mousedown",this._events.clickOverlay),window.addEventListener("resize",this._events.resize),document.addEventListener("keydown",this._events.keyboardNav)}.call(this),document.body.insertBefore(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter())},$.prototype.destroy=function(){null!==this.modal&&(function(){-1!==this.opts.closeMethods.indexOf("button")&&this.modalCloseBtn.removeEventListener("click",this._events.clickCloseBtn);this.modal.removeEventListener("mousedown",this._events.clickOverlay),window.removeEventListener("resize",this._events.resize),document.removeEventListener("keydown",this._events.keyboardNav)}.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null)},$.prototype.open=function(){var e=this;"function"==typeof e.opts.beforeOpen&&e.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty("display"):this.modal.style.removeAttribute("display"),this._scrollPosition=window.pageYOffset,document.body.classList.add("tingle-enabled"),document.body.style.top=-this._scrollPosition+"px",this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add("tingle-modal--visible"),Q?this.modal.addEventListener(Q,function t(){"function"==typeof e.opts.onOpen&&e.opts.onOpen.call(e),e.modal.removeEventListener(Q,t,!1)},!1):"function"==typeof e.opts.onOpen&&e.opts.onOpen.call(e),this.checkOverflow()},$.prototype.isOpen=function(){return!!this.modal.classList.contains("tingle-modal--visible")},$.prototype.close=function(){if("function"==typeof this.opts.beforeClose&&!this.opts.beforeClose.call(this))return;document.body.classList.remove("tingle-enabled"),window.scrollTo(0,this._scrollPosition),document.body.style.top=null,this.modal.classList.remove("tingle-modal--visible");var e=this;Q?this.modal.addEventListener(Q,function t(){e.modal.removeEventListener(Q,t,!1),e.modal.style.display="none","function"==typeof e.opts.onClose&&e.opts.onClose.call(this)},!1):(e.modal.style.display="none","function"==typeof e.opts.onClose&&e.opts.onClose.call(this))},$.prototype.setContent=function(e){"string"==typeof e?this.modalBoxContent.innerHTML=e:(this.modalBoxContent.innerHTML="",this.modalBoxContent.appendChild(e)),this.isOpen()&&this.checkOverflow()},$.prototype.getContent=function(){return this.modalBoxContent},$.prototype.addFooter=function(){(function(){this.modalBoxFooter=document.createElement("div"),this.modalBoxFooter.classList.add("tingle-modal-box__footer"),this.modalBox.appendChild(this.modalBoxFooter)}).call(this)},$.prototype.setFooterContent=function(e){this.modalBoxFooter.innerHTML=e},$.prototype.getFooterContent=function(){return this.modalBoxFooter},$.prototype.setStickyFooter=function(e){this.isOverflow()||(e=!1),e?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add("tingle-modal-box__footer--sticky"),X.call(this),this.modalBoxContent.style["padding-bottom"]=this.modalBoxFooter.clientHeight+20+"px"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width="auto",this.modalBoxFooter.style.left="",this.modalBoxContent.style["padding-bottom"]="",this.modalBoxFooter.classList.remove("tingle-modal-box__footer--sticky")))},$.prototype.addFooterBtn=function(e,t,n){var r=document.createElement("button");return r.innerHTML=e,r.addEventListener("click",n),"string"==typeof t&&t.length&&t.split(" ").forEach(function(e){r.classList.add(e)}),this.modalBoxFooter.appendChild(r),r},$.prototype.resize=function(){console.warn("Resize is deprecated and will be removed in version 1.0")},$.prototype.isOverflow=function(){var e=window.innerHeight;return this.modalBox.clientHeight>=e},$.prototype.checkOverflow=function(){this.modal.classList.contains("tingle-modal--visible")&&(this.isOverflow()?this.modal.classList.add("tingle-modal--overflow"):this.modal.classList.remove("tingle-modal--overflow"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(X.call(this),this.setStickyFooter(!0)))};var Y={};Y.modal=new $({footer:!0,closeLabel:"Close"}),Y.modal.addFooterBtn("Close","tingle-btn",function(){Y.modal.close()}),Y.set_content=function(e){Y.modal.setContent(e)},Y.open=function(){Y.modal.open()},Y.close=function(){Y.modal.close()};var ee={result:{},matter_names:[],done:!0,prepare:function(){var e=T.vm.layers;ee.matter=T.vm.layers;for(var t=0;t<e.length;t++)ee.matter_names.push(e[t].name)},prepareoutput:function(e){if(e.result&&(e.result.sigma_a=1e3*e.result.sigma_a),e.partial)for(var t in e.partial)e.partial[t].sigma_a=1e3*e.partial[t].sigma_a},getResult:function(){if(!(j.datavalid&&j.result&&ee.done)||j.result.error){ee.result={},ee.matter_names=[],ee.done=!1,ee.prepare();var e=L.prepare();L.calculate(e).then(function(e){if(!e.result||e.error)return ee.done=!0,j.clear_cache(),ee.result={error:"Failed to retrieve data from Atima Server"},void m.redraw();ee.done=!0,j.datavalid=!0,ee.prepareoutput(e),ee.result=e,e.result&&(ee.result.result.Brho=NucKinematics.brho_from_T(e.result.Eout,e.projectile.A,e.projectile.Z).toPrecision(6),ee.result.result.Beta=NucKinematics.beta_from_T(e.result.Eout).toPrecision(6)),j.result=ee.result,m.redraw()},function(){ee.done=!0,j.clear_cache(),ee.result={error:"Failed to retrieve data from Atima Server"},j.report("Failed to retrieve data from Atima Server"),m.redraw()}).catch(function(e){j.report(e)})}}},te={};function ne(){return j.state.config.is_same(r)?j.info="setting: ATIMA v1.3":j.state.config.is_same(i)?j.info="setting: ATIMA v1.4":j.info="setting: custom",m("footer",{class:p.footer},m("span",{style:"color:#666",class:"f7"},j.info))}function re(e){return m("nav",{class:p.nav},e)}te.oninit=function(){ee.getResult()},te.TotalTemplate=function(){var e=function(e){return e<.01?e.toExponential(4):e.toFixed(4)},t=ee.result;return t.result?m("div",{class:p.div_row},[m("div",{class:p.div_cell_100},[m("p","Projectile: ",j.projectile.state.Symbol)]),m("div",{class:p.div_cell_auto},[m("p",m.trust("E<sub>in</sub>")," = ",e(t.result.Ein)," MeV/u"),m("p",m.trust("E<sub>out</sub>")," = ",t.result.Eout.toFixed(4)," MeV/u"),m("p",m.trust("E<sub>loss</sub>")," = ",e(t.result.Eloss)," MeV")]),m("div",{class:p.div_cell_auto},[m("p",m.trust("B&#961")," = ",t.result.Brho," Tm"),m("p",m.trust("&#946")," = ",t.result.Beta),m("p",m.trust("TOF")," = ",t.result.tof.toFixed(6)," ns")]),m("div",{class:p.div_cell_auto},[m("p",m.trust("&#963<sub>E</sub>")," = ",e(t.result.sigma_E)," MeV/u"),t.result.Eout>0?m("p",m.trust("&#963<sub>p</sub>/p = "),NucKinematics.relative_momentum_deviation(t.result.sigma_E,t.result.Eout).toExponential(3)):null,m("p",m.trust("&#963<sub>a</sub>")," = ",e(t.result.sigma_a)," mrad")])]):null},te.PartialTemplate=function(){var e=function(e){return e<.01?e.toExponential(3):e.toFixed(3)},t=ee.result;return t.partial?m("div",{style:"overflow-x:auto;"},[m("table",{class:p.table},[m("thead",m("tr",{class:p.thead_tr},[m("th",{class:p.th},"#"),m("th",{class:p.th},"name"),m("th",{class:p.th},m.trust("E<sub>in</sub><br>(MeV/u)")),m("th",{class:p.th},m.trust("E<sub>out</sub><br>(MeV/u)")),m("th",{class:p.th},m.trust("E<sub>loss</sub><br>(MeV)")),m("th",{class:p.th},m.trust("&#963<sub>E</sub><br>(MeV/u)")),m("th",{class:p.th},m.trust("&#963<sub>a</sub><br>(mrad)")),m("th",{class:p.th},m.trust("range<br>(g/cm<sup>2</sup>)")),m("th",{class:p.th},m.trust("&#963<sub>r</sub><br>(g/cm<sup>2</sup>)")),m("th",{class:p.th},m.trust("dE<sub>in</sub>/dx<br>(MeV/(g/cm<sup>2</sup>))")),m("th",{class:p.th},m.trust("tof<br>(ns)")),m("th",{class:p.th},m.trust("d/R")),m("th",{class:p.th},m.trust("W<sub>e</sub>")),m("th",{class:p.th},m.trust("W<sub>p</sub>"))])),m("tbody",t.partial.map(function(n,r){var i="Brho = "+(NucKinematics.brho_from_T(n.Eout,t.projectile.A,t.projectile.Z).toPrecision(6)+"  Tm")+"\nBeta = "+NucKinematics.beta_from_T(n.Eout).toPrecision(6),a="material: "+ee.matter[r].symbol+"\nl = "+ee.matter[r].l+" cm\nth. = "+ee.matter[r].th+" g/cm2\ndensity = "+ee.matter[r].rho+" g/cm3";return m("tr",{class:p.tr},[m("td",{class:p.td},r),m("td",{class:p.td,title:a},ee.matter[r].name),m("td",{class:p.td},e(n.Ein)),m("td",{class:p.td,title:i},e(n.Eout)),m("td",{class:p.td},e(n.Eloss)),m("td",{class:p.td},e(n.sigma_E)),m("td",{class:p.td},e(n.sigma_a)),m("td",{class:p.td},e(n.range)),m("td",{class:p.td},e(n.sigma_r)),m("td",{class:p.td},e(n.dEdxi)),m("td",{class:p.td},e(n.tof)),m("td",{class:p.td},n.range>0?e(.001*ee.matter[r].th/n.range):""),m("td",{class:p.td},n.we&&n.we>0?e(n.we):""),m("td",{class:p.td},n.wp&&n.wp>0?e(n.wp):"")])}))])]):null},te.view=function(){var e=ee.result;return ee.done?e.error?b("Error: "+e.error):e.result?m("div",[m("div",{class:p.h3},"Results"),m("div",{class:p.div_cell_full},m(O,{title:"Total Results",content:te.TotalTemplate()})),m("div",{class:p.div_cell_full},m(O,{title:"Partial Results",content:te.PartialTemplate()})),e.id?m("div",{class:p.div_cell_full},g("Share Link",function(){var t='<div><label>Link:<input class="w-100" type="text" value="'+(window.location.origin+window.location.pathname+"?c="+e.id)+'"></input></label></div>';Y.set_content(t),Y.open()})):null]):b("Error: Could not find results"):m("span","Loading...")},"undefined"==typeof m&&(alert("failed to load ui library"),main_element.innerHTML="Failed to load ui library, probably old browser or network problem"),P.a.config("https://e64a8b51d35b4bddadf17a24eda759ce@sentry.io/1249356").install(),j.CheckBrowser()||alert("Some browser features were not detected, please use modern browser, otherwise this application may not work properly.");var ie=function(){return[m("a",{class:p.nav_item,onclick:function(){m.route.set("/")}},"Back")]},ae={oninit:function(){}};ae.view=function(e){return[m("div",{class:p.container_narrow},[re([m("a",{class:p.nav_item,onclick:function(){w(j.state,"webatima_input.json")}},"Save"),C({class:p.nav_item,title:"Load",id:"apploader"},j.LoadJSONFile),m("a",{class:p.nav_item_right+" fr",href:"about.html",target:"_blank"},"About"),m("a",{class:p.nav_item_right+" fr ",onclick:function(){m.route.set("/config")}},[m.trust('<svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>'),"Settings"])]),m("div",{class:p.combine([p.div_row,p.padding_vertical])},[m("div",{class:p.div_cell_20a},m(O,{title:"Projectile",content:m(G,{nucleus:j.projectile})})),m("div",{class:p.div_cell_80},m(O,{title:"Matter",content:m(T)}))]),m("div",{class:p.combine([p.div_row,p.padding_vertical])},m("div",{class:p.div_cell_full},[m("h2","Results"),m("a",{class:p.button_full,onclick:function(){-1==T.vm.editindex&&m.route.set("/results")}},"Calculate")]))]),ne()]};var oe={view:function(e){return m("div",{class:p.container_narrow},[re(ie()),m(R)])}},se={};se.view=function(e){if(j.loaded)return[m("div",{class:p.container},[re([m("a",{class:p.nav_item,onclick:function(){m.route.set("/")}},"Back"),m("a",{class:p.nav_item,onclick:function(){m.route.set("/nucchange")}},"Projectile"),m("a",{class:p.nav_item_right,href:"about.html",target:"_blank"},"About")]),m(te)]),ne()];m.route.set("/")};var le={oninit:function(e){e.state.plotdata=K},oncreate:function(e){e.state.plotdata.reset(),L.get_data(L.prepare(!0)).then(function(t){t.length>0?(e.state.plotdata.sort(t),m.redraw(),e.state.plotdata.update()):e.state.plotdata.status="failed"}).catch(function(e){j.report(e)})},view:function(e){if(j.loaded)return m("div",{class:p.container},[re(ie()),m(S,e.state.plotdata)]);m.route.set("/")}},ce={oninit:function(e){e.state.plotdata=W},oncreate:function(e){e.state.plotdata.reset();var t=j.get_editindex();t<0||L.get_data(L.prepare_one(t)).then(function(t){t.length>0?(e.state.plotdata.sort(t),m.redraw(),e.state.plotdata.update()):e.state.plotdata.status="failed"}).catch(function(e){j.report(e)})},view:function(e){if(j.loaded)return m("div",{class:p.container},[re(ie()),m(S,e.state.plotdata)]);m.route.set("/")}},ue={view:function(e){return m("div",{class:p.container_narrow},[re(ie()),m(J)])}};P.a.context(function(){main_element.innerHTML=loader("loading");var e=window.location.search,t=e.indexOf("?c=");if(e.length>3&&t>-1){var n=e.length;"/"==e.charAt(n-1)&&(n-=1);var r=e.substring(t+3,n);j.load_config(r)}else{var i=I.load("state");j.Load(i)}m.route(document.getElementById("NS"),"/",{"/":ae,"/nucchange":oe,"/results":se,"/plot":le,"/materialplot":ce,"/config":ue})})},function(e,t,n){var r=n(2);e.exports={wrapMethod:function(e,t,n){var i=e[t],a=e;if(t in e){var o="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),s=r.safeJoin(e," "),l={level:o,logger:"console",extra:{arguments:e}};"assert"===t?!1===e[0]&&(s="Assertion failed: "+(r.safeJoin(e.slice(1)," ")||"console.assert"),l.extra.arguments=e.slice(1),n&&n(s,l)):n&&n(s,l),i&&Function.prototype.apply.call(i,a,e)}}}}},function(e,t){function n(e){this.name="RavenConfigError",this.message=e}n.prototype=new Error,n.prototype.constructor=n,e.exports=n},function(e,t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,a,o){return n((s=n(n(t,e),n(i,o)))<<(l=a)|s>>>32-l,r);var s,l}function i(e,t,n,i,a,o,s){return r(t&n|~t&i,e,t,a,o,s)}function a(e,t,n,i,a,o,s){return r(t&i|n&~i,e,t,a,o,s)}function o(e,t,n,i,a,o,s){return r(t^n^i,e,t,a,o,s)}function s(e,t,n,i,a,o,s){return r(n^(t|~i),e,t,a,o,s)}function l(e,t){var r,l,c,u,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var m=1732584193,h=-271733879,p=-1732584194,f=271733878;for(r=0;r<e.length;r+=16)l=m,c=h,u=p,d=f,h=s(h=s(h=s(h=s(h=o(h=o(h=o(h=o(h=a(h=a(h=a(h=a(h=i(h=i(h=i(h=i(h,p=i(p,f=i(f,m=i(m,h,p,f,e[r],7,-680876936),h,p,e[r+1],12,-389564586),m,h,e[r+2],17,606105819),f,m,e[r+3],22,-1044525330),p=i(p,f=i(f,m=i(m,h,p,f,e[r+4],7,-176418897),h,p,e[r+5],12,1200080426),m,h,e[r+6],17,-1473231341),f,m,e[r+7],22,-45705983),p=i(p,f=i(f,m=i(m,h,p,f,e[r+8],7,1770035416),h,p,e[r+9],12,-1958414417),m,h,e[r+10],17,-42063),f,m,e[r+11],22,-1990404162),p=i(p,f=i(f,m=i(m,h,p,f,e[r+12],7,1804603682),h,p,e[r+13],12,-40341101),m,h,e[r+14],17,-1502002290),f,m,e[r+15],22,1236535329),p=a(p,f=a(f,m=a(m,h,p,f,e[r+1],5,-165796510),h,p,e[r+6],9,-1069501632),m,h,e[r+11],14,643717713),f,m,e[r],20,-373897302),p=a(p,f=a(f,m=a(m,h,p,f,e[r+5],5,-701558691),h,p,e[r+10],9,38016083),m,h,e[r+15],14,-660478335),f,m,e[r+4],20,-405537848),p=a(p,f=a(f,m=a(m,h,p,f,e[r+9],5,568446438),h,p,e[r+14],9,-1019803690),m,h,e[r+3],14,-187363961),f,m,e[r+8],20,1163531501),p=a(p,f=a(f,m=a(m,h,p,f,e[r+13],5,-1444681467),h,p,e[r+2],9,-51403784),m,h,e[r+7],14,1735328473),f,m,e[r+12],20,-1926607734),p=o(p,f=o(f,m=o(m,h,p,f,e[r+5],4,-378558),h,p,e[r+8],11,-2022574463),m,h,e[r+11],16,1839030562),f,m,e[r+14],23,-35309556),p=o(p,f=o(f,m=o(m,h,p,f,e[r+1],4,-1530992060),h,p,e[r+4],11,1272893353),m,h,e[r+7],16,-155497632),f,m,e[r+10],23,-1094730640),p=o(p,f=o(f,m=o(m,h,p,f,e[r+13],4,681279174),h,p,e[r],11,-358537222),m,h,e[r+3],16,-722521979),f,m,e[r+6],23,76029189),p=o(p,f=o(f,m=o(m,h,p,f,e[r+9],4,-640364487),h,p,e[r+12],11,-421815835),m,h,e[r+15],16,530742520),f,m,e[r+2],23,-995338651),p=s(p,f=s(f,m=s(m,h,p,f,e[r],6,-198630844),h,p,e[r+7],10,1126891415),m,h,e[r+14],15,-1416354905),f,m,e[r+5],21,-57434055),p=s(p,f=s(f,m=s(m,h,p,f,e[r+12],6,1700485571),h,p,e[r+3],10,-1894986606),m,h,e[r+10],15,-1051523),f,m,e[r+1],21,-2054922799),p=s(p,f=s(f,m=s(m,h,p,f,e[r+8],6,1873313359),h,p,e[r+15],10,-30611744),m,h,e[r+6],15,-1560198380),f,m,e[r+13],21,1309151649),p=s(p,f=s(f,m=s(m,h,p,f,e[r+4],6,-145523070),h,p,e[r+11],10,-1120210379),m,h,e[r+2],15,718787259),f,m,e[r+9],21,-343485551),m=n(m,l),h=n(h,c),p=n(p,u),f=n(f,d);return[m,h,p,f]}function c(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function m(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return c(l(u(e),8*e.length))}(m(e))}function p(e,t){return function(e,t){var n,r,i=u(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=l(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=l(a.concat(u(t)),512+8*t.length),c(l(o.concat(r),640))}(m(e),m(t))}e.exports=function(e,t,n){return t?n?p(t,e):d(p(t,e)):n?h(e):d(h(e))}},function(e,t,n){(function(t){var r=n(2),i={collectWindowErrors:!0,debug:!1},a="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=[].slice,s="?",l=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function c(){return"undefined"==typeof document||null==document.location?"":document.location.href}i.report=function(){var e,t,n=[],u=null,d=null,m=null;function h(e,t){var r=null;if(!t||i.collectWindowErrors){for(var a in n)if(n.hasOwnProperty(a))try{n[a].apply(null,[e].concat(o.call(arguments,2)))}catch(e){r=e}if(r)throw r}}function p(t,n,a,o,u){var d=r.isErrorEvent(u)?u.error:u,p=r.isErrorEvent(t)?t.message:t;if(m)i.computeStackTrace.augmentStackTraceWithInitialElement(m,n,a,p),f();else if(d&&r.isError(d))h(i.computeStackTrace(d),!0);else{var v,y={url:n,line:a,column:o},g=void 0;if("[object String]"==={}.toString.call(p))(v=p.match(l))&&(g=v[1],p=v[2]);y.func=s,h({name:g,message:p,url:c(),stack:[y]},!0)}return!!e&&e.apply(this,arguments)}function f(){var e=m,t=u;u=null,m=null,d=null,h.apply(null,[e,!1].concat(t))}function v(e,t){var n=o.call(arguments,1);if(m){if(d===e)return;f()}var r=i.computeStackTrace(e);if(m=r,d=e,u=n,setTimeout(function(){d===e&&f()},r.incomplete?2e3:0),!1!==t)throw e}return v.subscribe=function(r){t||(e=a.onerror,a.onerror=p,t=!0),n.push(r)},v.unsubscribe=function(e){for(var t=n.length-1;t>=0;--t)n[t]===e&&n.splice(t,1)},v.uninstall=function(){t&&(a.onerror=e,t=!1,e=void 0),n=[]},v}(),i.computeStackTrace=function(){function e(e){if(void 0!==e.stack&&e.stack){for(var t,n,r,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),m=[],h=(/^(.*) is undefined$/.exec(e.message),0),p=d.length;h<p;++h){if(n=i.exec(d[h])){var f=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=u.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:f?null:n[2],func:n[1]||s,args:f?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=a.exec(d[h]))r={url:n[2],func:n[1]||s,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=o.exec(d[h])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=l.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==h||n[5]||void 0===e.columnNumber||(m[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||s,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func=s),r.url&&"blob:"===r.url.substr(0,5)){var v=new XMLHttpRequest;if(v.open("GET",r.url,!1),v.send(null),200===v.status){var y=v.responseText||"",g=(y=y.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(g){var _=g[1];"~"===_.charAt(0)&&(_=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+_.slice(1)),r.url=_.slice(0,-4)}}}m.push(r)}return m.length?{name:e.name,message:e.message,url:c(),stack:m}:null}}function t(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=s),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,a){for(var o,l,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],m={},h=!1,p=n.caller;p&&!h;p=p.caller)if(p!==r&&p!==i.report){if(l={url:null,func:s,line:null,column:null},p.name?l.func=p.name:(o=u.exec(p.toString()))&&(l.func=o[1]),void 0===l.func)try{l.func=o.input.substring(0,o.input.indexOf("{"))}catch(e){}m[""+p]?h=!0:m[""+p]=!0,d.push(l)}a&&d.splice(0,a);var f={name:e.name,message:e.message,url:c(),stack:d};return t(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function r(t,r){var a=null;r=null==r?0:+r;try{if(a=e(t))return a}catch(e){if(i.debug)throw e}try{if(a=n(t,r+1))return a}catch(e){if(i.debug)throw e}return{name:t.name,message:t.message,url:c()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}(),e.exports=i}).call(this,n(1))},function(e,t,n){(function(t){var r=n(8),i=n(3),a=n(7),o=n(6),s=n(2),l=s.isErrorEvent,c=s.isDOMError,u=s.isDOMException,d=s.isError,m=s.isObject,h=s.isPlainObject,p=s.isUndefined,f=s.isFunction,v=s.isString,y=s.isArray,g=s.isEmptyObject,_=s.each,b=s.objectMerge,w=s.truncate,C=s.objectFrozen,k=s.hasKey,x=s.joinRegExp,O=s.urlencode,E=s.uuid4,S=s.htmlTreeAsString,N=s.isSameException,F=s.isSameStacktrace,A=s.parseUrl,T=s.fill,B=s.supportsFetch,M=s.supportsReferrerPolicy,I=s.serializeKeysForMessage,H=s.serializeException,P=s.sanitize,j=n(5).wrapMethod,L="source protocol user pass host port path".split(" "),R=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function D(){return+new Date}var G="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Z=G.document,U=G.navigator;function z(e,t){return f(t)?function(n){return t(n,e)}:t}function V(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!p(Z),this._hasNavigator=!p(U),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:G.SENTRY_RELEASE&&G.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",keepalive:!0,referrerPolicy:M()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=G.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=D(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=G.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}V.prototype={VERSION:"3.26.4",debug:!1,TraceKit:r,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n._globalOptions;t&&_(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:i[e]=t}),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=x(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&x(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&x(i.whitelistUrls),i.includePaths=x(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var a={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=b(a,o):!1!==o&&(o=a),i.autoBreadcrumbs=o;var s={tryCatch:!0},l=i.instrument;return"[object Object]"==={}.toString.call(l)?l=b(s,l):!1!==l&&(l=s),i.instrument=l,r.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(r.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this._parseDSN(e),n=t.path.lastIndexOf("/"),r=t.path.substr(1,n);this._dsn=e,this._globalKey=t.user,this._globalSecret=t.pass&&t.pass.substr(1),this._globalProject=t.path.substr(n+1),this._globalServer=this._getGlobalServer(t),this._globalEndpoint=this._globalServer+"/"+r+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return f(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){var r=this;if(p(t)&&!f(e))return e;if(f(e)&&(t=e,e=void 0),!f(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}function i(){var i=[],a=arguments.length,o=!e||e&&!1!==e.deep;for(n&&f(n)&&n.apply(this,arguments);a--;)i[a]=o?r.wrap(e,arguments[a]):arguments[a];try{return t.apply(this,i)}catch(t){throw r._ignoreNextOnError(),r.captureException(t,e),t}}for(var a in t)k(t,a)&&(i[a]=t[a]);return i.prototype=t.prototype,t.__raven_wrapper__=i,i.__raven__=!0,i.__orig__=t,i},uninstall:function(){return r.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),G.addEventListener&&G.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return G.removeEventListener&&G.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(e,t){if(t=b({trimHeadFrames:0},t||{}),l(e)&&e.error)e=e.error;else{if(c(e)||u(e)){var n=e.name||(c(e)?"DOMError":"DOMException"),i=e.message?n+": "+e.message:n;return this.captureMessage(i,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(d(e))e=e;else{if(!h(e))return this.captureMessage(e,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this._getCaptureExceptionOptionsFromPlainObject(t,e),e=new Error(t.message)}}this._lastCapturedException=e;try{var a=r.computeStackTrace(e);this._handleStackInfo(a,t)}catch(t){if(e!==t)throw t}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var n=Object.keys(t).sort(),r=b(e,{message:"Non-Error exception captured with keys: "+I(n),fingerprint:[a(n)],extra:e.extra||{}});return r.extra.__serialized__=H(t),r},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n,i=b({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){n=e}n.name=null;var a=r.computeStackTrace(n),o=y(a.stack)&&a.stack[1];o&&"Raven.captureException"===o.func&&(o=a.stack[2]);var s=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,(t=b({trimHeadFrames:0},t)).trimHeadFrames+=1;var l=this._prepareFrames(a,t);i.stacktrace={frames:l.reverse()}}return i.fingerprint&&(i.fingerprint=y(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function(e){var t=b({timestamp:D()/1e3},e);if(f(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(m(n)&&!g(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=z(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=z(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=z(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=G.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(Z){if(!(e=Object.assign({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new o("Missing eventId");if(!e.dsn)throw new o("Missing DSN");var t=encodeURIComponent,n=[];for(var r in e)if("user"===r){var i=e.user;i.name&&n.push("name="+t(i.name)),i.email&&n.push("email="+t(i.email))}else n.push(t(r)+"="+t(e[r]));var a=this._getGlobalServer(this._parseDSN(e.dsn)),s=Z.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/?"+n.join("&"),(Z.head||Z.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,r;if(this._hasDocument){for(r in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),Z.createEvent?(n=Z.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=Z.createEventObject()).eventType=e,t)k(t,r)&&(n[r]=t[r]);if(Z.createEvent)Z.dispatchEvent(n);else try{Z.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(n){if(t._keypressTimeout=null,t._lastCapturedEvent!==n){var r;t._lastCapturedEvent=n;try{r=S(n.target)}catch(e){r="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:r})}}},_keypressEventHandler:function(){var e=this;return function(t){var n;try{n=t.target}catch(e){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},1e3)}}},_captureUrlChange:function(e,t){var n=A(this._location.href),r=A(t),i=A(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var e=this,t=e._wrappedBuiltIns;function n(t){return function(n,r){for(var i=new Array(arguments.length),a=0;a<i.length;++a)i[a]=arguments[a];var o=i[0];return f(o)&&(i[0]=e.wrap({mechanism:{type:"instrument",data:{function:t.name||"<anonymous>"}}},o)),t.apply?t.apply(this,i):t(i[0],i[1])}}var r=this._globalOptions.autoBreadcrumbs;function i(n){var i=G[n]&&G[n].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(T(i,"addEventListener",function(t){return function(i,a,o,s){try{a&&a.handleEvent&&(a.handleEvent=e.wrap({mechanism:{type:"instrument",data:{target:n,function:"handleEvent",handler:a&&a.name||"<anonymous>"}}},a.handleEvent))}catch(e){}var l,c,u;return r&&r.dom&&("EventTarget"===n||"Node"===n)&&(c=e._breadcrumbEventHandler("click"),u=e._keypressEventHandler(),l=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?c(e):"keypress"===t?u(e):void 0}}),t.call(this,i,e.wrap({mechanism:{type:"instrument",data:{target:n,function:"addEventListener",handler:a&&a.name||"<anonymous>"}}},a,l),o,s)}},t),T(i,"removeEventListener",function(e){return function(t,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(e){}return e.call(this,t,n,r,i)}},t))}T(G,"setTimeout",n,t),T(G,"setInterval",n,t),G.requestAnimationFrame&&T(G,"requestAnimationFrame",function(t){return function(n){return t(e.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},n))}},t);for(var a=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<a.length;o++)i(a[o])},_instrumentBreadcrumbs:function(){var e=this,t=this._globalOptions.autoBreadcrumbs,n=e._wrappedBuiltIns;function r(t,n){t in n&&f(n[t])&&T(n,t,function(n){return e.wrap({mechanism:{type:"instrument",data:{function:t,handler:n&&n.name||"<anonymous>"}}},n)})}if(t.xhr&&"XMLHttpRequest"in G){var i=G.XMLHttpRequest&&G.XMLHttpRequest.prototype;T(i,"open",function(t){return function(n,r){return v(r)&&-1===r.indexOf(e._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),t.apply(this,arguments)}},n),T(i,"send",function(t){return function(){var n=this;function i(){if(n.__raven_xhr&&4===n.readyState){try{n.__raven_xhr.status_code=n.status}catch(e){}e.captureBreadcrumb({type:"http",category:"xhr",data:n.__raven_xhr})}}for(var a=["onload","onerror","onprogress"],o=0;o<a.length;o++)r(a[o],n);return"onreadystatechange"in n&&f(n.onreadystatechange)?T(n,"onreadystatechange",function(t){return e.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"}}},t,i)}):n.onreadystatechange=i,t.apply(this,arguments)}},n)}t.xhr&&B()&&T(G,"fetch",function(t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var i,a=n[0],o="GET";if("string"==typeof a?i=a:"Request"in G&&a instanceof G.Request?(i=a.url,a.method&&(o=a.method)):i=""+a,-1!==i.indexOf(e._globalKey))return t.apply(this,n);n[1]&&n[1].method&&(o=n[1].method);var s={method:o,url:i,status_code:null};return t.apply(this,n).then(function(t){return s.status_code=t.status,e.captureBreadcrumb({type:"http",category:"fetch",data:s}),t}).catch(function(t){throw e.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),t})}},n),t.dom&&this._hasDocument&&(Z.addEventListener?(Z.addEventListener("click",e._breadcrumbEventHandler("click"),!1),Z.addEventListener("keypress",e._keypressEventHandler(),!1)):Z.attachEvent&&(Z.attachEvent("onclick",e._breadcrumbEventHandler("click")),Z.attachEvent("onkeypress",e._keypressEventHandler())));var a=G.chrome,o=!(a&&a.app&&a.app.runtime)&&G.history&&G.history.pushState&&G.history.replaceState;if(t.location&&o){var s=G.onpopstate;G.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),s)return s.apply(this,arguments)};var l=function(t){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&e._captureUrlChange(e._lastHref,n+""),t.apply(this,arguments)}};T(G.history,"pushState",l,n),T(G.history,"replaceState",l,n)}if(t.console&&"console"in G&&console.log){var c=function(t,n){e.captureBreadcrumb({message:t,level:n.level,category:"console"})};_(["debug","info","warn","error","log"],function(e,t){j(console,t,c)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],r=e[2];t[n]=r}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var e=this;_(this._plugins,function(t,n){var r=n[0],i=n[1];r.apply(e,[e].concat(i))})},_parseDSN:function(e){var t=R.exec(e),n={},r=7;try{for(;r--;)n[L[r]]=t[r]||""}catch(t){throw new o("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new o("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this,r=[];if(e.stack&&e.stack.length&&(_(e.stack,function(t,i){var a=n._normalizeFrame(i,e.url);a&&r.push(a)}),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(e,t,n,r,i,a){var o,s=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(n=i[0].filename||n,i.reverse(),o={frames:i}):n&&(o={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var l=b({exception:{values:[{type:e,value:t,stacktrace:o}]},transaction:n},a),c=l.exception.values[0];null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),!l.exception.mechanism&&l.mechanism&&(l.exception.mechanism=l.mechanism,delete l.mechanism),l.exception.mechanism=b({type:"generic",handled:!0},l.exception.mechanism||{}),this._send(l)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=w(e.message,t)),e.exception){var n=e.exception.values[0];n.value=w(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=w(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=w(r.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,r,i=["to","from","url"],a=0;a<e.values.length;++a)if((n=e.values[a]).hasOwnProperty("data")&&m(n.data)&&!C(n.data)){r=b({},n.data);for(var o=0;o<i.length;++o)t=i[o],r.hasOwnProperty(t)&&r[t]&&(r[t]=w(r[t],this._globalOptions.maxUrlLength));e.values[a].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&U.userAgent&&(e.headers={"User-Agent":U.userAgent}),G.location&&G.location.href&&(e.url=G.location.href),this._hasDocument&&Z.referrer&&(e.headers||(e.headers={}),e.headers.Referer=Z.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&D()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?F(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||N(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=B()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=D()}}},_send:function(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,(e=b(n,e)).tags=b(b({},this._globalContext.tags),e.tags),e.extra=b(b({},this._globalContext.extra),e.extra),e.extra["session:duration"]=D()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this._sanitizeData(e),Object.keys(e).forEach(function(t){(null==e[t]||""===e[t]||g(e[t]))&&delete e[t]}),f(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!g(e)&&(f(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sanitizeData:function(e){return P(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return E()},_sendProcessedPayload:function(e,t){var n=this,r=this._globalOptions;if(this.isSetup())if(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var a=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:e.message,event_id:e.event_id,level:e.level||"error"});var o=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:o,auth:i,data:e,options:r,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:o}),t&&t()},onError:function(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:e,src:o}),r=r||new Error("Raven send failed (no additional details provided)"),t&&t(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function(e){var t=e.url+"?"+O(e.auth),n=null,r={};if(e.options.headers&&(n=this._evaluateHash(e.options.headers)),e.options.fetchParameters&&(r=this._evaluateHash(e.options.fetchParameters)),B()){r.body=i(e.data);var a=b({},this._fetchDefaults),o=b(a,r);return n&&(o.headers=n),G.fetch(t,o).then(function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError&&e.onError(n)}}).catch(function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))})}var s=G.XMLHttpRequest&&new G.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!=typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+s.status);t.request=s,e.onError(t)}}:(s=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(s.onload=e.onSuccess),e.onError&&(s.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=s,e.onError(t)})),s.open("POST",t),n&&_(n,function(e,t){s.setRequestHeader(e,t)}),s.send(i(e.data))))},_evaluateHash:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]="function"==typeof r?r():r}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){p(t)?delete this._globalContext[e]:this._globalContext[e]=b(this._globalContext[e]||{},t)}},V.prototype.setUser=V.prototype.setUserContext,V.prototype.setReleaseContext=V.prototype.setRelease,e.exports=V}).call(this,n(1))}]);
//# sourceMappingURL=main.js.map